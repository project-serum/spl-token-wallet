{"version":3,"sources":["utils/tokens/names.js","utils/tokens/index.js","utils/connection.js","utils/utils.js","utils/wallet.js","utils/fetch-loop.js","utils/tokens/instructions.js","utils/tokens/data.js","components/SolanaIcon.js","components/NavigationFrame.js","components/LoadingIndicator.js","components/DialogForm.js","components/CopyableDisplay.js","components/TokenInfoDialog.js","utils/notifications.js","components/AddTokenDialog.js","utils/swap/api.js","utils/config.js","utils/swap/eth.js","components/SendDialog.js","components/DepositDialog.js","components/BalancesList.js","components/DebugButtons.js","pages/WalletPage.js","pages/PopupPage.js","pages/LoginPage.js","App.js","serviceWorker.js","index.js","utils/wallet-seed.js"],"names":["TOKENS","MAINNET_URL","mintAddress","tokenName","tokenSymbol","customTokenNamesByNetwork","JSON","parse","localStorage","getItem","nameUpdated","EventEmitter","useTokenName","mint","endpoint","useConnectionConfig","useListener","name","symbol","info","toBase58","match","find","token","useUpdateTokenName","useCallback","setItem","stringify","emit","setMaxListeners","getOwnedTokenAccounts","connection","publicKey","a","filters","getOwnedAccountsFilters","_rpcRequest","TOKEN_PROGRAM_ID","commitment","resp","error","Error","message","result","map","pubkey","account","data","executable","owner","lamports","PublicKey","accountInfo","bs58","decode","filter","every","dataSize","length","memcmp","filterBytes","bytes","slice","offset","equals","createAndInitializeMint","amount","decimals","initialAccount","SystemProgram","getMinimumBalanceForRentExemption","MINT_LAYOUT","span","fromPubkey","newAccountPubkey","space","programId","transaction","createAccount","add","initializeMint","mintAuthority","signers","ACCOUNT_LAYOUT","push","initializeAccount","mintTo","destination","sendTransaction","createAndInitializeTokenAccount","payer","mintPublicKey","newAccount","transferTokens","sourcePublicKey","destinationPublicKey","memo","Transaction","transfer","source","memoInstruction","ConnectionContext","React","createContext","ConnectionProvider","children","useLocalStorageState","setEndpoint","useMemo","Connection","Provider","value","useConnection","useContext","context","useIsProdNetwork","useSolanaExplorerUrlSuffix","clusterApiUrl","useAccountInfo","cacheKey","tuple","useAsyncData","getAccountInfo","loaded","useEffect","previousData","id","onAccountChange","setCache","removeAccountChangeListener","refreshAccountInfo","clearCache","refreshCache","setInitialAccountInfo","initializeOnly","sleep","ms","Promise","resolve","setTimeout","key","defaultState","useState","storedState","state","setState","setLocalStorageState","newState","removeItem","useEffectAfterTimeout","effect","timeout","handle","clearTimeout","emitter","eventName","forceUpdate","listener","i","on","removeListener","abbreviateAddress","address","base58","confirmTransaction","signature","startTime","Date","race","then","onSignature","err","console","log","slot","Wallet","seed","walletIndex","getTokenPublicKeys","accounts","createTokenAccount","tokenAddress","Account","tokenAccountCost","transferToken","transferSol","toPubkey","this","getAccountFromSeed","accountIndex","derivedSeed","bip32","derivePath","privateKey","nacl","sign","keyPair","fromSeed","secretKey","WalletContext","WalletProvider","walletSeedChanged","getUnlockedMnemonicAndSeed","mnemonic","setWalletIndex","wallet","Buffer","from","useWallet","useWalletPublicKeys","tokenPublicKeys","refreshWalletPublicKeys","useBalanceInfo","accountInfoLoaded","parseTokenAccountData","mintInfo","mintInfoLoaded","WRAPPED_SOL_MINT","valid","parseMintData","e","useWalletSelector","walletCount","setWalletCount","addresses","seedBuffer","Array","keys","pageLoadTime","globalCache","Map","globalLoops","loops","has","set","FetchLoopInternal","fn","get","addListener","loop","stopped","delete","refresh","all","values","FetchLoopListener","refreshInterval","callback","timeoutId","errors","notifyListeners","warn","waitTime","Math","min","pow","timeSincePageLoad","document","visibilityState","hasFocus","random","listeners","Set","previousRefreshInterval","assert","forEach","size","asyncFn","formatCacheKey","useReducer","rerender","undefined","isArray","MEMO_PROGRAM_ID","LAYOUT","BufferLayout","addVariant","instructionMaxSpan","max","Object","registry","r","encodeTokenInstructionData","instruction","b","alloc","encode","freezeAuthority","isSigner","isWritable","SYSVAR_RENT_PUBKEY","TransactionInstruction","toBuffer","freezeAuthorityOption","offsetOf","SolanaIcon","SvgIcon","viewBox","d","useStyles","makeStyles","theme","content","flexGrow","paddingTop","spacing","paddingBottom","paddingLeft","paddingRight","title","button","marginLeft","menuItemIcon","minWidth","NavigationFrame","classes","AppBar","position","Toolbar","Typography","variant","className","component","WalletSelector","NetworkSelector","Footer","anchorEl","setAnchorEl","networks","networkLabels","Hidden","xsDown","Button","color","onClick","target","smUp","Tooltip","arrow","IconButton","Menu","open","onClose","anchorOrigin","vertical","horizontal","getContentAnchorEl","network","MenuItem","selected","ListItemIcon","fontSize","index","Divider","useFooterStyles","footer","display","justifyContent","margin","rel","href","startIcon","root","alignItems","width","height","padding","LoadingIndicator","delay","rest","visible","setVisible","style","CircularProgress","DialogForm","onSubmit","useTheme","fullScreen","useMediaQuery","breakpoints","down","Dialog","PaperProps","preventDefault","marginTop","marginBottom","CopyableDisplay","label","autoFocus","qrCode","helperText","enqueueSnackbar","useSnackbar","textareaRef","useRef","TextField","inputRef","ref","current","multiline","readOnly","onFocus","currentTarget","select","textArea","fullWidth","spellCheck","execCommand","autoHideDuration","useQrCodeStyles","qrcodeContainer","flexDirection","Qrcode","showQrcode","setShowQrcode","DialogContent","includeMargin","explorerLink","warning","container","TokenInfoDialog","balanceInfo","urlSuffix","DialogTitle","Link","useSendTransaction","closeSnackbar","sending","setSending","signaturePromise","onSuccess","onError","persist","action","ViewTransactionOnExplorerButton","useCallAsync","promise","progressMessage","successMessage","feeFormat","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","tabs","borderBottom","palette","background","paper","AddTokenDialog","updateTokenName","setMintAddress","setTokenName","setTokenSymbol","popularTokens","tab","setTab","DialogContentText","format","LAMPORTS_PER_SOL","Tabs","textColor","indicatorColor","onChange","Tab","textDecoration","List","disablePadding","TokenListItem","disalbed","Fragment","DialogActions","type","disabled","setOpen","ListItem","ListItemText","primary","Collapse","in","unmountOnExit","SwapApiError","msg","status","swapApiRequest","method","path","body","ignoreUserErrors","params","headers","cache","fetch","handleSwapApiResponse","json","success","useSwapApiGet","options","showTokenInfoDialog","showSwapAddress","web3","Web3","window","ethereum","useEthAccount","setAccount","request","getErc20Balance","erc20Address","parseInt","eth","getBalance","erc20","Contract","ERC20_ABI","methods","balanceOf","call","swapErc20ToSpl","ethAccount","swapAddress","onStatusChange","swapEthToSpl","swap","SWAP_ABI","approveTx","approve","round","send","waitForTxid","step","swapTx","swapErc20","gasLimit","swapTxid","txid","confirms","waitForConfirms","swapEth","floor","pendingNonces","withdrawal","callAsync","txData","withdrawErc20","nonce","withdrawEth","estimateGas","coin","ticker","tx","reject","once","catch","resolved","receipt","ConnectToMetamaskButton","SendDialog","onSubmitRef","swapCoinInfo","erc20Contract","SendSplDialog","SendSwapDialog","blockchain","EthWithdrawalCompleter","useForm","fields","destinationAddress","transferAmountString","makeTransaction","parseFloat","setSignature","setDestinationAddress","needMetamask","swapInfo","SendSwapProgress","swaps","getSignatureStatus","confirmations","ethTxid","deposit","startsWith","Stepper","activeStep","Step","StepLabel","marginRight","align","setTransferAmountString","balanceAmount","trim","InputProps","endAdornment","InputAdornment","inputProps","toFixed","EthWithdrawalCompleterItem","DepositDialog","firstTab","secondTab","SolletSwapDepositAddress","MetamaskDeposit","setAmount","submitted","setSubmitted","setStatus","maxSize","Infinity","maxAmount","maxAmountLoaded","parsedAmount","balanceFormat","useGrouping","BalancesList","publicKeys","showAddTokenDialog","setShowAddTokenDialog","Paper","elevation","BalanceListItem","textOverflow","overflowX","itemDetails","buttonContainer","secondary","secondaryTypographyProps","BalanceListItemDetails","sendDialogOpen","setSendDialogOpen","depositDialogOpen","setDepositDialogOpen","tokenInfoDialogOpen","setTokenInfoDialogOpen","DebugButtons","noSol","requestAirdropDisabled","requestAirdrop","WalletPage","isProdNetwork","Container","fixed","maxWidth","Grid","item","xs","PopupPage","opener","origin","URLSearchParams","location","hash","postMessage","jsonrpc","connectedAccount","setConnectedAccount","hasConnectedAccount","requests","setRequests","unloadHandler","addEventListener","removeEventListener","messageHandler","ApproveConnectionForm","onApprove","focusParent","ApproveSignatureForm","detached","onReject","textAlign","wordBreak","actions","Card","CardContent","gutterBottom","CardActions","close","LoginPage","restore","setRestore","RestoreWalletForm","goBack","hasLockedMnemonicAndSeed","LoginForm","CreateWalletForm","cursor","mnemonicAndSeed","setMnemonicAndSeed","generateMnemonicAndSeed","savedWords","setSavedWords","ChoosePasswordForm","password","storeMnemonicAndSeed","SeedWordsForm","goForward","confirmed","setConfirmed","paragraph","FormControlLabel","control","Checkbox","checked","setPassword","passwordConfirm","setPasswordConfirm","autoComplete","stayLoggedIn","setStayLoggedIn","loadMnemonicAndSeed","setMnemonic","rows","mnemonicToSeed","App","prefersDarkMode","createMuiTheme","blue","self","top","fallback","ThemeProvider","CssBaseline","maxSnack","PageContents","Boolean","hostname","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","bip39","generateMnemonic","toString","validateMnemonic","unlockedMnemonicAndSeed","sessionStorage","setUnlockedMnemonicAndSeed","plaintext","salt","randomBytes","kdf","iterations","digest","deriveEncryptionKey","secretbox","nonceLength","encrypted","encodedEncrypted","encodedNonce","encodedSalt","decodedPlaintext","pbkdf2","keyLength"],"mappings":"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","file":"static/js/main.36e390c6.chunk.js","sourcesContent":["import EventEmitter from 'events';\nimport { useConnectionConfig, MAINNET_URL } from '../connection';\nimport { useListener } from '../utils';\nimport { useCallback } from 'react';\n\nexport const TOKENS = {\n  [MAINNET_URL]: [\n    {\n      mintAddress: 'SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt',\n      tokenName: 'Serum',\n      tokenSymbol: 'SRM',\n    },\n    {\n      mintAddress: 'MSRMcoVyrFxnSgo5uXwone5SKcGhT1KEJMFEkMEWf9L',\n      tokenName: 'MegaSerum',\n      tokenSymbol: 'MSRM',\n    },\n    {\n      tokenSymbol: 'BTC',\n      mintAddress: '9n4nbM75f5Ui33ZbPYXn59EwSgE8CGsHtAeTH5YFeJ9E',\n      tokenName: 'Wrapped Bitcoin',\n    },\n    {\n      tokenSymbol: 'ETH',\n      mintAddress: '2FPyTwcZLUg1MDrwsyoP4D6s1tM7hAkHYRjkNb5w6Pxk',\n      tokenName: 'Wrapped Ethereum',\n    },\n    {\n      tokenSymbol: 'FTT',\n      mintAddress: 'AGFEad2et2ZJif9jaGpdMixQqvW5i81aBdvKe7PHNfz3',\n      tokenName: 'Wrapped FTT',\n    },\n    {\n      tokenSymbol: 'YFI',\n      mintAddress: '3JSf5tPeuscJGtaCp5giEiDhv51gQ4v3zWg8DGgyLfAB',\n      tokenName: 'Wrapped YFI',\n    },\n    {\n      tokenSymbol: 'LINK',\n      mintAddress: 'CWE8jPTUYhdCTZYWPTe1o5DFqfdjzWKc9WKz6rSjQUdG',\n      tokenName: 'Wrapped Chainlink',\n    },\n    {\n      tokenSymbol: 'XRP',\n      mintAddress: 'Ga2AXHpfAF6mv2ekZwcsJFqu7wB4NV331qNH7fW9Nst8',\n      tokenName: 'Wrapped XRP',\n    },\n    {\n      tokenSymbol: 'USDT',\n      mintAddress: 'BQcdHdAQW1hczDbBi9hiegXAR7A98Q9jx3X3iBBBDiq4',\n      tokenName: 'Wrapped USDT',\n    },\n    {\n      tokenSymbol: 'USDC',\n      mintAddress: 'BXXkv6z8ykpG1yuvUDPgh732wzVHB69RnB9YgSYh3itW',\n      tokenName: 'Wrapped USDC',\n    },\n    {\n      tokenSymbol: 'SUSHI',\n      mintAddress: 'AR1Mtgh7zAtxuxGd2XPovXPVjcSdY3i4rQYisNadjfKy',\n      tokenName: 'Wrapped SUSHI',\n    },\n    {\n      tokenSymbol: 'ALEPH',\n      mintAddress: 'CsZ5LZkDS7h9TDKjrbL7VAwQZ9nsRu8vJLhRYfmGaN8K',\n      tokenName: 'Wrapped ALEPH',\n    },\n    {\n      tokenSymbol: 'SXP',\n      mintAddress: 'SF3oTvfWzEP3DTwGSvUXRrGTvr75pdZNnBLAH9bzMuX',\n      tokenName: 'Wrapped SXP',\n    },\n    {\n      tokenSymbol: 'HGET',\n      mintAddress: 'BtZQfWqDGbk9Wf2rXEiWyQBdBY1etnUUn6zEphvVS7yN',\n      tokenName: 'Wrapped HGET',\n    },\n  ],\n};\n\nconst customTokenNamesByNetwork = JSON.parse(\n  localStorage.getItem('tokenNames') ?? '{}',\n);\n\nconst nameUpdated = new EventEmitter();\nnameUpdated.setMaxListeners(100);\n\nexport function useTokenName(mint) {\n  const { endpoint } = useConnectionConfig();\n  useListener(nameUpdated, 'update');\n\n  if (!mint) {\n    return { name: null, symbol: null };\n  }\n\n  let info = customTokenNamesByNetwork?.[endpoint]?.[mint.toBase58()];\n  if (!info) {\n    let match = TOKENS?.[endpoint]?.find(\n      (token) => token.mintAddress === mint.toBase58(),\n    );\n    if (match) {\n      info = { name: match.tokenName, symbol: match.tokenSymbol };\n    }\n  }\n  return { name: info?.name, symbol: info?.symbol };\n}\n\nexport function useUpdateTokenName() {\n  const { endpoint } = useConnectionConfig();\n  return useCallback(\n    function updateTokenName(mint, name, symbol) {\n      if (!customTokenNamesByNetwork[endpoint]) {\n        customTokenNamesByNetwork[endpoint] = {};\n      }\n      customTokenNamesByNetwork[endpoint][mint.toBase58()] = { name, symbol };\n      localStorage.setItem(\n        'tokenNames',\n        JSON.stringify(customTokenNamesByNetwork),\n      );\n      nameUpdated.emit('update');\n    },\n    [endpoint],\n  );\n}\n","import { PublicKey, SystemProgram, Transaction } from '@solana/web3.js';\nimport {\n  initializeAccount,\n  initializeMint,\n  memoInstruction,\n  mintTo,\n  TOKEN_PROGRAM_ID,\n  transfer,\n} from './instructions';\nimport { ACCOUNT_LAYOUT, getOwnedAccountsFilters, MINT_LAYOUT } from './data';\nimport bs58 from 'bs58';\n\nexport async function getOwnedTokenAccounts(connection, publicKey) {\n  let filters = getOwnedAccountsFilters(publicKey);\n  let resp = await connection._rpcRequest('getProgramAccounts', [\n    TOKEN_PROGRAM_ID.toBase58(),\n    {\n      commitment: connection.commitment,\n      filters,\n    },\n  ]);\n  if (resp.error) {\n    throw new Error(\n      'failed to get token accounts owned by ' +\n        publicKey.toBase58() +\n        ': ' +\n        resp.error.message,\n    );\n  }\n  return resp.result\n    .map(({ pubkey, account: { data, executable, owner, lamports } }) => ({\n      publicKey: new PublicKey(pubkey),\n      accountInfo: {\n        data: bs58.decode(data),\n        executable,\n        owner: new PublicKey(owner),\n        lamports,\n      },\n    }))\n    .filter(({ accountInfo }) => {\n      // TODO: remove this check once mainnet is updated\n      return filters.every((filter) => {\n        if (filter.dataSize) {\n          return accountInfo.data.length === filter.dataSize;\n        } else if (filter.memcmp) {\n          let filterBytes = bs58.decode(filter.memcmp.bytes);\n          return accountInfo.data\n            .slice(\n              filter.memcmp.offset,\n              filter.memcmp.offset + filterBytes.length,\n            )\n            .equals(filterBytes);\n        }\n        return false;\n      });\n    });\n}\n\nexport async function createAndInitializeMint({\n  connection,\n  owner, // Account for paying fees and allowed to mint new tokens\n  mint, // Account to hold token information\n  amount, // Number of tokens to issue\n  decimals,\n  initialAccount, // Account to hold newly issued tokens, if amount > 0\n}) {\n  let transaction = SystemProgram.createAccount({\n    fromPubkey: owner.publicKey,\n    newAccountPubkey: mint.publicKey,\n    lamports: await connection.getMinimumBalanceForRentExemption(\n      MINT_LAYOUT.span,\n    ),\n    space: MINT_LAYOUT.span,\n    programId: TOKEN_PROGRAM_ID,\n  });\n  transaction.add(\n    initializeMint({\n      mint: mint.publicKey,\n      decimals,\n      mintAuthority: owner.publicKey,\n    }),\n  );\n  let signers = [owner, mint];\n  if (amount > 0) {\n    transaction.add(\n      SystemProgram.createAccount({\n        fromPubkey: owner.publicKey,\n        newAccountPubkey: initialAccount.publicKey,\n        lamports: await connection.getMinimumBalanceForRentExemption(\n          ACCOUNT_LAYOUT.span,\n        ),\n        space: ACCOUNT_LAYOUT.span,\n        programId: TOKEN_PROGRAM_ID,\n      }),\n    );\n    signers.push(initialAccount);\n    transaction.add(\n      initializeAccount({\n        account: initialAccount.publicKey,\n        mint: mint.publicKey,\n        owner: owner.publicKey,\n      }),\n    );\n    transaction.add(\n      mintTo({\n        mint: mint.publicKey,\n        destination: initialAccount.publicKey,\n        amount,\n        mintAuthority: owner.publicKey,\n      }),\n    );\n  }\n  return await connection.sendTransaction(transaction, signers);\n}\n\nexport async function createAndInitializeTokenAccount({\n  connection,\n  payer,\n  mintPublicKey,\n  newAccount,\n}) {\n  let transaction = SystemProgram.createAccount({\n    fromPubkey: payer.publicKey,\n    newAccountPubkey: newAccount.publicKey,\n    lamports: await connection.getMinimumBalanceForRentExemption(\n      ACCOUNT_LAYOUT.span,\n    ),\n    space: ACCOUNT_LAYOUT.span,\n    programId: TOKEN_PROGRAM_ID,\n  });\n  transaction.add(\n    initializeAccount({\n      account: newAccount.publicKey,\n      mint: mintPublicKey,\n      owner: payer.publicKey,\n    }),\n  );\n  let signers = [payer, newAccount];\n  return await connection.sendTransaction(transaction, signers);\n}\n\nexport async function transferTokens({\n  connection,\n  owner,\n  sourcePublicKey,\n  destinationPublicKey,\n  amount,\n  memo,\n}) {\n  let transaction = new Transaction().add(\n    transfer({\n      source: sourcePublicKey,\n      destination: destinationPublicKey,\n      owner: owner.publicKey,\n      amount,\n    }),\n  );\n  if (memo) {\n    transaction.add(memoInstruction(memo));\n  }\n  let signers = [owner];\n  return await connection.sendTransaction(transaction, signers);\n}\n","import React, { useContext, useEffect, useMemo } from 'react';\nimport { clusterApiUrl, Connection } from '@solana/web3.js';\nimport { useLocalStorageState } from './utils';\nimport { refreshCache, setCache, useAsyncData } from './fetch-loop';\nimport tuple from 'immutable-tuple';\n\nconst ConnectionContext = React.createContext(null);\n\nexport const MAINNET_URL = 'https://solana-api.projectserum.com';\nexport function ConnectionProvider({ children }) {\n  const [endpoint, setEndpoint] = useLocalStorageState(\n    'connectionEndpoint',\n    MAINNET_URL,\n  );\n\n  const connection = useMemo(() => new Connection(endpoint, 'recent'), [\n    endpoint,\n  ]);\n\n  return (\n    <ConnectionContext.Provider value={{ endpoint, setEndpoint, connection }}>\n      {children}\n    </ConnectionContext.Provider>\n  );\n}\n\nexport function useConnection() {\n  return useContext(ConnectionContext).connection;\n}\n\nexport function useConnectionConfig() {\n  let context = useContext(ConnectionContext);\n  return { endpoint: context.endpoint, setEndpoint: context.setEndpoint };\n}\n\nexport function useIsProdNetwork() {\n  const endpoint = useContext(ConnectionContext).endpoint;\n  return endpoint === MAINNET_URL;\n}\n\nexport function useSolanaExplorerUrlSuffix() {\n  const endpoint = useContext(ConnectionContext).endpoint;\n  if (endpoint === clusterApiUrl('devnet')) {\n    return '?cluster=devnet';\n  } else if (endpoint === clusterApiUrl('testnet')) {\n    return '?cluster=testnet';\n  }\n  return '';\n}\n\nexport function useAccountInfo(publicKey) {\n  const connection = useConnection();\n  const cacheKey = tuple(connection, publicKey?.toBase58());\n  const [accountInfo, loaded] = useAsyncData(\n    async () => (publicKey ? connection.getAccountInfo(publicKey) : null),\n    cacheKey,\n  );\n  useEffect(() => {\n    if (!publicKey) {\n      return;\n    }\n    let previousData = null;\n    const id = connection.onAccountChange(publicKey, (info) => {\n      if (info.data) {\n        if (!previousData || !previousData.equals(info.data)) {\n          previousData = info.data;\n          setCache(cacheKey, info);\n        }\n      }\n    });\n    return () => connection.removeAccountChangeListener(id);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [connection, publicKey?.toBase58(), cacheKey]);\n  return [accountInfo, loaded];\n}\n\nexport function refreshAccountInfo(connection, publicKey, clearCache = false) {\n  const cacheKey = tuple(connection, publicKey.toBase58());\n  refreshCache(cacheKey, clearCache);\n}\n\nexport function setInitialAccountInfo(connection, publicKey, accountInfo) {\n  const cacheKey = tuple(connection, publicKey.toBase58());\n  setCache(cacheKey, accountInfo, { initializeOnly: true });\n}\n","import { useCallback, useEffect, useState } from 'react';\n\nexport async function sleep(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\nexport function useLocalStorageState(key, defaultState = null) {\n  const [state, setState] = useState(() => {\n    let storedState = localStorage.getItem(key);\n    if (storedState) {\n      return JSON.parse(storedState);\n    }\n    return defaultState;\n  });\n\n  const setLocalStorageState = useCallback(\n    (newState) => {\n      let changed = state !== newState;\n      if (!changed) {\n        return;\n      }\n      setState(newState);\n      if (newState === null) {\n        localStorage.removeItem(key);\n      } else {\n        localStorage.setItem(key, JSON.stringify(newState));\n      }\n    },\n    [state, key],\n  );\n\n  return [state, setLocalStorageState];\n}\n\nexport function useEffectAfterTimeout(effect, timeout) {\n  useEffect(() => {\n    let handle = setTimeout(effect, timeout);\n    return () => clearTimeout(handle);\n  });\n}\n\nexport function useListener(emitter, eventName) {\n  let [, forceUpdate] = useState(0);\n  useEffect(() => {\n    let listener = () => forceUpdate((i) => i + 1);\n    emitter.on(eventName, listener);\n    return () => emitter.removeListener(eventName, listener);\n  }, [emitter, eventName]);\n}\n\nexport function abbreviateAddress(address) {\n  let base58 = address.toBase58();\n  return base58.slice(0, 4) + '' + base58.slice(base58.length - 4);\n}\n\nexport async function confirmTransaction(connection, signature) {\n  let startTime = new Date();\n  let result = await Promise.race([\n    connection.confirmTransaction(signature, 1).then((result) => result.value),\n    new Promise((resolve) => connection.onSignature(signature, resolve)),\n  ]);\n  if (!result) {\n    throw new Error('Failed to confirm transaction');\n  }\n  if (result.err) {\n    throw new Error(\n      'Error confirming transaction: ' + JSON.stringify(result.err),\n    );\n  }\n  console.log(\n    'Transaction confirmed via %s after %sms',\n    result.slot ? 'REST' : 'WS',\n    new Date() - startTime,\n  );\n  return result;\n}\n","import React, { useContext, useMemo } from 'react';\nimport * as bip32 from 'bip32';\nimport { Account, SystemProgram } from '@solana/web3.js';\nimport nacl from 'tweetnacl';\nimport {\n  setInitialAccountInfo,\n  useAccountInfo,\n  useConnection,\n} from './connection';\nimport {\n  createAndInitializeTokenAccount,\n  getOwnedTokenAccounts,\n  transferTokens,\n} from './tokens';\nimport { TOKEN_PROGRAM_ID, WRAPPED_SOL_MINT } from './tokens/instructions';\nimport {\n  ACCOUNT_LAYOUT,\n  parseMintData,\n  parseTokenAccountData,\n} from './tokens/data';\nimport { useListener, useLocalStorageState } from './utils';\nimport { useTokenName } from './tokens/names';\nimport { refreshCache, useAsyncData } from './fetch-loop';\nimport { getUnlockedMnemonicAndSeed, walletSeedChanged } from './wallet-seed';\n\nexport class Wallet {\n  constructor(connection, seed, walletIndex = 0) {\n    this.connection = connection;\n    this.seed = seed;\n    this.walletIndex = walletIndex;\n    this.account = Wallet.getAccountFromSeed(this.seed, this.walletIndex);\n  }\n\n  static getAccountFromSeed(seed, walletIndex, accountIndex = 0) {\n    const derivedSeed = bip32\n      .fromSeed(seed)\n      .derivePath(`m/501'/${walletIndex}'/0/${accountIndex}`).privateKey;\n    return new Account(nacl.sign.keyPair.fromSeed(derivedSeed).secretKey);\n  }\n\n  get publicKey() {\n    return this.account.publicKey;\n  }\n\n  getTokenPublicKeys = async () => {\n    let accounts = await getOwnedTokenAccounts(\n      this.connection,\n      this.account.publicKey,\n    );\n    return accounts.map(({ publicKey, accountInfo }) => {\n      setInitialAccountInfo(this.connection, publicKey, accountInfo);\n      return publicKey;\n    });\n  };\n\n  createTokenAccount = async (tokenAddress) => {\n    return await createAndInitializeTokenAccount({\n      connection: this.connection,\n      payer: this.account,\n      mintPublicKey: tokenAddress,\n      newAccount: new Account(),\n    });\n  };\n\n  tokenAccountCost = async () => {\n    return this.connection.getMinimumBalanceForRentExemption(\n      ACCOUNT_LAYOUT.span,\n    );\n  };\n\n  transferToken = async (source, destination, amount, memo = null) => {\n    if (source.equals(this.publicKey)) {\n      if (memo) {\n        throw new Error('Memo not implemented');\n      }\n      return this.transferSol(destination, amount);\n    }\n    return await transferTokens({\n      connection: this.connection,\n      owner: this.account,\n      sourcePublicKey: source,\n      destinationPublicKey: destination,\n      amount,\n      memo,\n    });\n  };\n\n  transferSol = async (destination, amount) => {\n    return await this.connection.sendTransaction(\n      SystemProgram.transfer({\n        fromPubkey: this.publicKey,\n        toPubkey: destination,\n        lamports: amount,\n      }),\n      [this.account],\n    );\n  };\n}\n\nconst WalletContext = React.createContext(null);\n\nexport function WalletProvider({ children }) {\n  useListener(walletSeedChanged, 'change');\n  const { mnemonic, seed } = getUnlockedMnemonicAndSeed();\n  const connection = useConnection();\n  const [walletIndex, setWalletIndex] = useLocalStorageState('walletIndex', 0);\n  const wallet = useMemo(\n    () =>\n      seed\n        ? new Wallet(connection, Buffer.from(seed, 'hex'), walletIndex)\n        : null,\n    [connection, seed, walletIndex],\n  );\n  return (\n    <WalletContext.Provider\n      value={{ wallet, walletIndex, setWalletIndex, seed, mnemonic }}\n    >\n      {children}\n    </WalletContext.Provider>\n  );\n}\n\nexport function useWallet() {\n  return useContext(WalletContext).wallet;\n}\n\nexport function useWalletPublicKeys() {\n  let wallet = useWallet();\n  let [tokenPublicKeys, loaded] = useAsyncData(\n    wallet.getTokenPublicKeys,\n    wallet.getTokenPublicKeys,\n  );\n  let publicKeys = [wallet.account.publicKey, ...(tokenPublicKeys ?? [])];\n  return [publicKeys, loaded];\n}\n\nexport function refreshWalletPublicKeys(wallet) {\n  refreshCache(wallet.getTokenPublicKeys);\n}\n\nexport function useBalanceInfo(publicKey) {\n  let [accountInfo, accountInfoLoaded] = useAccountInfo(publicKey);\n  let { mint, owner, amount } = accountInfo?.owner.equals(TOKEN_PROGRAM_ID)\n    ? parseTokenAccountData(accountInfo.data)\n    : {};\n  let [mintInfo, mintInfoLoaded] = useAccountInfo(mint);\n  let { name, symbol } = useTokenName(mint);\n\n  if (!accountInfoLoaded) {\n    return null;\n  }\n\n  if (mint && mint.equals(WRAPPED_SOL_MINT)) {\n    return {\n      amount,\n      decimals: 9,\n      mint,\n      owner,\n      tokenName: 'Wrapped SOL',\n      tokenSymbol: 'SOL',\n      valid: true,\n    };\n  }\n\n  if (mint && mintInfoLoaded) {\n    try {\n      let { decimals } = parseMintData(mintInfo.data);\n      return {\n        amount,\n        decimals,\n        mint,\n        owner,\n        tokenName: name,\n        tokenSymbol: symbol,\n        valid: true,\n      };\n    } catch (e) {\n      return {\n        amount,\n        decimals: 0,\n        mint,\n        owner,\n        tokenName: 'Invalid',\n        tokenSymbol: 'INVALID',\n        valid: false,\n      };\n    }\n  }\n\n  if (!mint) {\n    return {\n      amount: accountInfo?.lamports ?? 0,\n      decimals: 9,\n      mint: null,\n      owner: publicKey,\n      tokenName: 'SOL',\n      tokenSymbol: 'SOL',\n      valid: true,\n    };\n  }\n\n  return null;\n}\n\nexport function useWalletSelector() {\n  const { walletIndex, setWalletIndex, seed } = useContext(WalletContext);\n  const [walletCount, setWalletCount] = useLocalStorageState('walletCount', 1);\n  function selectWallet(walletIndex) {\n    if (walletIndex >= walletCount) {\n      setWalletCount(walletIndex + 1);\n    }\n    setWalletIndex(walletIndex);\n  }\n  const addresses = useMemo(() => {\n    if (!seed) {\n      return [];\n    }\n    const seedBuffer = Buffer.from(seed, 'hex');\n    return [...Array(walletCount).keys()].map(\n      (walletIndex) =>\n        Wallet.getAccountFromSeed(seedBuffer, walletIndex).publicKey,\n    );\n  }, [seed, walletCount]);\n  return { addresses, walletIndex, setWalletIndex: selectWallet };\n}\n\nexport async function mnemonicToSecretKey(mnemonic) {\n  const { mnemonicToSeed } = await import('bip39');\n  const rootSeed = Buffer.from(await mnemonicToSeed(mnemonic), 'hex');\n  const derivedSeed = bip32.fromSeed(rootSeed).derivePath(\"m/501'/0'/0/0\")\n    .privateKey;\n  return nacl.sign.keyPair.fromSeed(derivedSeed).secretKey;\n}\n","import assert from 'assert';\nimport { useEffect, useReducer } from 'react';\nimport tuple from 'immutable-tuple';\n\nconst pageLoadTime = new Date();\n\nconst globalCache = new Map();\n\nclass FetchLoops {\n  loops = new Map();\n\n  addListener(listener) {\n    if (!this.loops.has(listener.cacheKey)) {\n      this.loops.set(\n        listener.cacheKey,\n        new FetchLoopInternal(listener.cacheKey, listener.fn),\n      );\n    }\n    this.loops.get(listener.cacheKey).addListener(listener);\n  }\n\n  removeListener(listener) {\n    let loop = this.loops.get(listener.cacheKey);\n    loop.removeListener(listener);\n    if (loop.stopped) {\n      this.loops.delete(listener.cacheKey);\n    }\n  }\n\n  refresh(cacheKey) {\n    if (this.loops.has(cacheKey)) {\n      this.loops.get(cacheKey).refresh();\n    }\n  }\n\n  refreshAll() {\n    return Promise.all([...this.loops.values()].map((loop) => loop.refresh()));\n  }\n}\nconst globalLoops = new FetchLoops();\n\nclass FetchLoopListener {\n  constructor(cacheKey, fn, refreshInterval, callback) {\n    this.cacheKey = cacheKey;\n    this.fn = fn;\n    this.refreshInterval = refreshInterval;\n    this.callback = callback;\n  }\n}\n\nclass FetchLoopInternal {\n  constructor(cacheKey, fn) {\n    this.cacheKey = cacheKey;\n    this.fn = fn;\n    this.timeoutId = null;\n    this.listeners = new Set();\n    this.errors = 0;\n  }\n\n  get refreshInterval() {\n    return Math.min(\n      ...[...this.listeners].map((listener) => listener.refreshInterval),\n    );\n  }\n\n  get stopped() {\n    return this.listeners.size === 0;\n  }\n\n  addListener(listener) {\n    let previousRefreshInterval = this.refreshInterval;\n    this.listeners.add(listener);\n    if (this.refreshInterval < previousRefreshInterval) {\n      this.refresh();\n    }\n  }\n\n  removeListener(listener) {\n    assert(this.listeners.delete(listener));\n    if (this.stopped) {\n      if (this.timeoutId) {\n        clearTimeout(this.timeoutId);\n        this.timeoutId = null;\n      }\n    }\n  }\n\n  notifyListeners() {\n    this.listeners.forEach((listener) => listener.callback());\n  }\n\n  refresh = async () => {\n    if (this.timeoutId) {\n      clearTimeout(this.timeoutId);\n      this.timeoutId = null;\n    }\n    if (this.stopped) {\n      return;\n    }\n\n    try {\n      let data = await this.fn();\n      globalCache.set(this.cacheKey, data);\n      this.errors = 0;\n      this.notifyListeners();\n      return data;\n    } catch (error) {\n      ++this.errors;\n      console.warn(error);\n    } finally {\n      if (!this.timeoutId && !this.stopped) {\n        let waitTime = this.refreshInterval;\n\n        // Back off on errors.\n        if (this.errors > 0) {\n          waitTime = Math.min(1000 * Math.pow(2, this.errors - 1), 60000);\n        }\n\n        // Don't do any refreshing for the first five seconds, to make way for other things to load.\n        let timeSincePageLoad = new Date() - pageLoadTime;\n        if (timeSincePageLoad < 5000) {\n          waitTime += 5000 - timeSincePageLoad / 2;\n        }\n\n        // Refresh background pages slowly.\n        if (document.visibilityState === 'hidden') {\n          waitTime = 60000;\n        } else if (!document.hasFocus()) {\n          waitTime *= 1.5;\n        }\n\n        // Add jitter so we don't send all requests at the same time.\n        waitTime *= 0.8 + 0.4 * Math.random();\n\n        this.timeoutId = setTimeout(this.refresh, waitTime);\n      }\n    }\n  };\n}\n\nexport function useAsyncData(\n  asyncFn,\n  cacheKey,\n  { refreshInterval = 60000 } = {},\n) {\n  cacheKey = formatCacheKey(cacheKey);\n\n  const [, rerender] = useReducer((i) => i + 1, 0);\n\n  useEffect(() => {\n    if (!cacheKey) {\n      return () => {};\n    }\n    const listener = new FetchLoopListener(\n      cacheKey,\n      asyncFn,\n      refreshInterval,\n      rerender,\n    );\n    globalLoops.addListener(listener);\n    return () => globalLoops.removeListener(listener);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [cacheKey, refreshInterval]);\n\n  if (!cacheKey) {\n    return [null, false];\n  }\n\n  const loaded = globalCache.has(cacheKey);\n  const data = loaded ? globalCache.get(cacheKey) : undefined;\n  return [data, loaded];\n}\n\nexport function refreshCache(cacheKey, clearCache = false) {\n  cacheKey = formatCacheKey(cacheKey);\n  if (clearCache) {\n    globalCache.delete(cacheKey);\n  }\n  const loop = globalLoops.loops.get(cacheKey);\n  if (loop) {\n    loop.refresh();\n    if (clearCache) {\n      loop.notifyListeners();\n    }\n  }\n}\n\nexport function setCache(cacheKey, value, { initializeOnly = false } = {}) {\n  cacheKey = formatCacheKey(cacheKey);\n  if (initializeOnly && globalCache.has(cacheKey)) {\n    return;\n  }\n  globalCache.set(cacheKey, value);\n  const loop = globalLoops.loops.get(cacheKey);\n  if (loop) {\n    loop.notifyListeners();\n  }\n}\n\nfunction formatCacheKey(cacheKey) {\n  if (Array.isArray(cacheKey)) {\n    return tuple(...cacheKey);\n  }\n  return cacheKey;\n}\n","import * as BufferLayout from 'buffer-layout';\nimport {\n  PublicKey,\n  SYSVAR_RENT_PUBKEY,\n  TransactionInstruction,\n} from '@solana/web3.js';\n\nexport const TOKEN_PROGRAM_ID = new PublicKey(\n  'TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA',\n);\n\nexport const WRAPPED_SOL_MINT = new PublicKey(\n  'So11111111111111111111111111111111111111111',\n);\n\nexport const MEMO_PROGRAM_ID = new PublicKey(\n  'Memo1UhkJRfHyvLMcVucJwxXeuD728EqVDDwQDxFMNo',\n);\n\nconst LAYOUT = BufferLayout.union(BufferLayout.u8('instruction'));\nLAYOUT.addVariant(\n  0,\n  BufferLayout.struct([\n    BufferLayout.u8('decimals'),\n    BufferLayout.blob(32, 'mintAuthority'),\n    BufferLayout.u8('freezeAuthorityOption'),\n    BufferLayout.blob(32, 'freezeAuthority'),\n  ]),\n  'initializeMint',\n);\nLAYOUT.addVariant(1, BufferLayout.struct([]), 'initializeAccount');\nLAYOUT.addVariant(\n  3,\n  BufferLayout.struct([BufferLayout.nu64('amount')]),\n  'transfer',\n);\nLAYOUT.addVariant(\n  7,\n  BufferLayout.struct([BufferLayout.nu64('amount')]),\n  'mintTo',\n);\nLAYOUT.addVariant(\n  8,\n  BufferLayout.struct([BufferLayout.nu64('amount')]),\n  'burn',\n);\n\nconst instructionMaxSpan = Math.max(\n  ...Object.values(LAYOUT.registry).map((r) => r.span),\n);\n\nfunction encodeTokenInstructionData(instruction) {\n  let b = Buffer.alloc(instructionMaxSpan);\n  let span = LAYOUT.encode(instruction, b);\n  return b.slice(0, span);\n}\n\nexport function initializeMint({\n  mint,\n  decimals,\n  mintAuthority,\n  freezeAuthority,\n}) {\n  let keys = [\n    { pubkey: mint, isSigner: false, isWritable: true },\n    { pubkey: SYSVAR_RENT_PUBKEY, isSigner: false, isWritable: false },\n  ];\n  return new TransactionInstruction({\n    keys,\n    data: encodeTokenInstructionData({\n      initializeMint: {\n        decimals,\n        mintAuthority: mintAuthority.toBuffer(),\n        freezeAuthorityOption: !!freezeAuthority,\n        freezeAuthority: (freezeAuthority || new PublicKey()).toBuffer(),\n      },\n    }),\n    programId: TOKEN_PROGRAM_ID,\n  });\n}\n\nexport function initializeAccount({ account, mint, owner }) {\n  let keys = [\n    { pubkey: account, isSigner: false, isWritable: true },\n    { pubkey: mint, isSigner: false, isWritable: false },\n    { pubkey: owner, isSigner: false, isWritable: false },\n    { pubkey: SYSVAR_RENT_PUBKEY, isSigner: false, isWritable: false },\n  ];\n  return new TransactionInstruction({\n    keys,\n    data: encodeTokenInstructionData({\n      initializeAccount: {},\n    }),\n    programId: TOKEN_PROGRAM_ID,\n  });\n}\n\nexport function transfer({ source, destination, amount, owner }) {\n  let keys = [\n    { pubkey: source, isSigner: false, isWritable: true },\n    { pubkey: destination, isSigner: false, isWritable: true },\n    { pubkey: owner, isSigner: true, isWritable: false },\n  ];\n  return new TransactionInstruction({\n    keys,\n    data: encodeTokenInstructionData({\n      transfer: { amount },\n    }),\n    programId: TOKEN_PROGRAM_ID,\n  });\n}\n\nexport function mintTo({ mint, destination, amount, mintAuthority }) {\n  let keys = [\n    { pubkey: mint, isSigner: false, isWritable: true },\n    { pubkey: destination, isSigner: false, isWritable: true },\n    { pubkey: mintAuthority, isSigner: true, isWritable: false },\n  ];\n  return new TransactionInstruction({\n    keys,\n    data: encodeTokenInstructionData({\n      mintTo: {\n        amount,\n      },\n    }),\n    programId: TOKEN_PROGRAM_ID,\n  });\n}\n\nexport function memoInstruction(memo) {\n  return new TransactionInstruction({\n    keys: [],\n    data: Buffer.from(memo, 'utf-8'),\n    programId: MEMO_PROGRAM_ID,\n  });\n}\n","import * as BufferLayout from 'buffer-layout';\nimport { PublicKey } from '@solana/web3.js';\n\nexport const ACCOUNT_LAYOUT = BufferLayout.struct([\n  BufferLayout.blob(32, 'mint'),\n  BufferLayout.blob(32, 'owner'),\n  BufferLayout.nu64('amount'),\n  BufferLayout.blob(93),\n]);\n\nexport const MINT_LAYOUT = BufferLayout.struct([\n  BufferLayout.blob(44),\n  BufferLayout.u8('decimals'),\n  BufferLayout.blob(37),\n]);\n\nexport function parseTokenAccountData(data) {\n  let { mint, owner, amount } = ACCOUNT_LAYOUT.decode(data);\n  return {\n    mint: new PublicKey(mint),\n    owner: new PublicKey(owner),\n    amount,\n  };\n}\n\nexport function parseMintData(data) {\n  let { decimals } = MINT_LAYOUT.decode(data);\n  return { decimals };\n}\n\nexport function getOwnedAccountsFilters(publicKey) {\n  return [\n    {\n      memcmp: {\n        offset: ACCOUNT_LAYOUT.offsetOf('owner'),\n        bytes: publicKey.toBase58(),\n      },\n    },\n    {\n      dataSize: ACCOUNT_LAYOUT.span,\n    },\n  ];\n}\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default function SolanaIcon() {\n  return (\n    <SvgIcon viewBox=\"0 0 450 450\">\n      <path d=\"m374.393945,136.203008c-2.518,2.519 -5.934,3.934 -9.496,3.934l-336.443,0c-11.891,0 -17.914,-14.315 -9.601,-22.817l55.186,-56.441c2.527,-2.584 5.988,-4.041 9.602,-4.041l337.697,0c11.964,0 17.955,14.465 9.496,22.925l-56.441,56.44z\" />\n      <path d=\"m374.393945,392.628008c-2.518,2.518 -5.934,3.933 -9.496,3.933l-336.443,0c-11.891,0 -17.914,-14.315 -9.601,-22.817l55.186,-56.441c2.527,-2.584 5.988,-4.041 9.602,-4.041l337.697,0c11.964,0 17.955,14.465 9.496,22.925l-56.441,56.441z\" />\n      <path d=\"m374.393945,188.933008c-2.518,-2.518 -5.934,-3.933 -9.496,-3.933l-336.443,0c-11.891,0 -17.914,14.315 -9.601,22.817l55.186,56.441c2.527,2.584 5.988,4.04 9.602,4.04l337.697,0c11.964,0 17.955,-14.464 9.496,-22.924l-56.441,-56.441z\" />\n    </SvgIcon>\n  );\n}\n","import React, { useState } from 'react';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport AppBar from '@material-ui/core/AppBar';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useConnectionConfig, MAINNET_URL } from '../utils/connection';\nimport Button from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { clusterApiUrl } from '@solana/web3.js';\nimport { useWalletSelector } from '../utils/wallet';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport CheckIcon from '@material-ui/icons/Check';\nimport AddIcon from '@material-ui/icons/Add';\nimport AccountIcon from '@material-ui/icons/AccountCircle';\nimport Divider from '@material-ui/core/Divider';\nimport Hidden from '@material-ui/core/Hidden';\nimport IconButton from '@material-ui/core/IconButton';\nimport SolanaIcon from './SolanaIcon';\nimport CodeIcon from '@material-ui/icons/Code';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst useStyles = makeStyles((theme) => ({\n  content: {\n    flexGrow: 1,\n    paddingTop: theme.spacing(3),\n    paddingBottom: theme.spacing(3),\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n  },\n  title: {\n    flexGrow: 1,\n  },\n  button: {\n    marginLeft: theme.spacing(1),\n  },\n  menuItemIcon: {\n    minWidth: 32,\n  },\n}));\n\nexport default function NavigationFrame({ children }) {\n  const classes = useStyles();\n  return (\n    <>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Typography variant=\"h6\" className={classes.title} component=\"h1\">\n            Solana SPL Token Wallet\n          </Typography>\n          <WalletSelector />\n          <NetworkSelector />\n        </Toolbar>\n      </AppBar>\n      <main className={classes.content}>{children}</main>\n      <Footer />\n    </>\n  );\n}\n\nfunction NetworkSelector() {\n  const { endpoint, setEndpoint } = useConnectionConfig();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const classes = useStyles();\n\n  const networks = [\n    MAINNET_URL,\n    clusterApiUrl('devnet'),\n    clusterApiUrl('testnet'),\n    'http://localhost:8899',\n  ];\n\n  const networkLabels = {\n    [MAINNET_URL]: 'Mainnet Beta',\n    [clusterApiUrl('devnet')]: 'Devnet',\n    [clusterApiUrl('testnet')]: 'Testnet',\n  };\n\n  return (\n    <>\n      <Hidden xsDown>\n        <Button\n          color=\"inherit\"\n          onClick={(e) => setAnchorEl(e.target)}\n          className={classes.button}\n        >\n          {networkLabels[endpoint] ?? 'Network'}\n        </Button>\n      </Hidden>\n      <Hidden smUp>\n        <Tooltip title=\"Select Network\" arrow>\n          <IconButton color=\"inherit\" onClick={(e) => setAnchorEl(e.target)}>\n            <SolanaIcon />\n          </IconButton>\n        </Tooltip>\n      </Hidden>\n      <Menu\n        anchorEl={anchorEl}\n        open={!!anchorEl}\n        onClose={() => setAnchorEl(null)}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'right',\n        }}\n        getContentAnchorEl={null}\n      >\n        {networks.map((network) => (\n          <MenuItem\n            key={network}\n            onClick={() => {\n              setAnchorEl(null);\n              setEndpoint(network);\n            }}\n            selected={network === endpoint}\n          >\n            <ListItemIcon className={classes.menuItemIcon}>\n              {network === endpoint ? <CheckIcon fontSize=\"small\" /> : null}\n            </ListItemIcon>\n            {network}\n          </MenuItem>\n        ))}\n      </Menu>\n    </>\n  );\n}\n\nfunction WalletSelector() {\n  const { addresses, walletIndex, setWalletIndex } = useWalletSelector();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const classes = useStyles();\n\n  if (addresses.length === 0) {\n    return null;\n  }\n\n  return (\n    <>\n      <Hidden xsDown>\n        <Button\n          color=\"inherit\"\n          onClick={(e) => setAnchorEl(e.target)}\n          className={classes.button}\n        >\n          Account\n        </Button>\n      </Hidden>\n      <Hidden smUp>\n        <Tooltip title=\"Select Account\" arrow>\n          <IconButton color=\"inherit\" onClick={(e) => setAnchorEl(e.target)}>\n            <AccountIcon />\n          </IconButton>\n        </Tooltip>\n      </Hidden>\n      <Menu\n        anchorEl={anchorEl}\n        open={!!anchorEl}\n        onClose={() => setAnchorEl(null)}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'right',\n        }}\n        getContentAnchorEl={null}\n      >\n        {addresses.map((address, index) => (\n          <MenuItem\n            key={address.toBase58()}\n            onClick={() => {\n              setAnchorEl(null);\n              setWalletIndex(index);\n            }}\n            selected={index === walletIndex}\n          >\n            <ListItemIcon className={classes.menuItemIcon}>\n              {index === walletIndex ? <CheckIcon fontSize=\"small\" /> : null}\n            </ListItemIcon>\n            {address.toBase58()}\n          </MenuItem>\n        ))}\n        <Divider />\n        <MenuItem\n          onClick={() => {\n            setAnchorEl(null);\n            setWalletIndex(addresses.length);\n          }}\n        >\n          <ListItemIcon className={classes.menuItemIcon}>\n            <AddIcon fontSize=\"small\" />\n          </ListItemIcon>\n          Create Account\n        </MenuItem>\n      </Menu>\n    </>\n  );\n}\n\nconst useFooterStyles = makeStyles((theme) => ({\n  footer: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    margin: theme.spacing(2),\n  },\n}));\n\nfunction Footer() {\n  const classes = useFooterStyles();\n  return (\n    <footer className={classes.footer}>\n      <Button\n        variant=\"outlined\"\n        color=\"primary\"\n        component=\"a\"\n        target=\"_blank\"\n        rel=\"noopener\"\n        href=\"https://github.com/serum-foundation/spl-token-wallet\"\n        startIcon={<CodeIcon />}\n      >\n        View Source\n      </Button>\n    </footer>\n  );\n}\n","import React, { useState } from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { useEffectAfterTimeout } from '../utils/utils';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: '100%',\n    height: '100%',\n    padding: theme.spacing(2),\n  },\n}));\n\nexport default function LoadingIndicator({\n  height = null,\n  delay = 500,\n  ...rest\n}) {\n  const classes = useStyles();\n  const [visible, setVisible] = useState(false);\n\n  useEffectAfterTimeout(() => setVisible(true), delay);\n\n  let style = {};\n  if (height) {\n    style.height = height;\n  }\n\n  if (!visible) {\n    return height ? <div style={style} /> : null;\n  }\n\n  return (\n    <div className={classes.root} style={style} {...rest}>\n      <CircularProgress />\n    </div>\n  );\n}\n","import React from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport { useTheme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\n\nexport default function DialogForm({\n  open,\n  onClose,\n  onSubmit,\n  children,\n  ...rest\n}) {\n  const theme = useTheme();\n  const fullScreen = useMediaQuery(theme.breakpoints.down('xs'));\n\n  return (\n    <Dialog\n      open={open}\n      PaperProps={{\n        component: 'form',\n        onSubmit: (e) => {\n          e.preventDefault();\n          if (onSubmit) {\n            onSubmit();\n          }\n        },\n      }}\n      onClose={onClose}\n      fullScreen={fullScreen}\n      {...rest}\n    >\n      {children}\n    </Dialog>\n  );\n}\n","import React, { useRef } from 'react';\nimport { TextField } from '@material-ui/core';\nimport CopyIcon from 'mdi-material-ui/ContentCopy';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useSnackbar } from 'notistack';\nimport QrcodeIcon from 'mdi-material-ui/Qrcode';\nimport QRCode from 'qrcode.react';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport Dialog from '@material-ui/core/Dialog';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1),\n    alignItems: 'baseline',\n  },\n}));\n\nexport default function CopyableDisplay({\n  value,\n  label,\n  autoFocus,\n  qrCode,\n  helperText,\n}) {\n  const { enqueueSnackbar } = useSnackbar();\n  const textareaRef = useRef();\n  const classes = useStyles();\n  const copyLink = () => {\n    let textArea = textareaRef.current;\n    if (textArea) {\n      textArea.select();\n      document.execCommand('copy');\n      enqueueSnackbar(`Copied ${label}`, {\n        variant: 'info',\n        autoHideDuration: 2500,\n      });\n    }\n  };\n\n  return (\n    <div className={classes.root}>\n      <TextField\n        inputRef={(ref) => (textareaRef.current = ref)}\n        multiline\n        autoFocus={autoFocus}\n        value={value}\n        readOnly\n        onFocus={(e) => e.currentTarget.select()}\n        className={classes.textArea}\n        fullWidth\n        helperText={helperText}\n        label={label}\n        spellCheck={false}\n      />\n      <IconButton onClick={copyLink}>\n        <CopyIcon />\n      </IconButton>\n      {qrCode ? <Qrcode value={qrCode === true ? value : qrCode} /> : null}\n    </div>\n  );\n}\n\nconst useQrCodeStyles = makeStyles((theme) => ({\n  qrcodeContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    marginBottom: theme.spacing(2),\n  },\n}));\n\nfunction Qrcode({ value }) {\n  const [showQrcode, setShowQrcode] = React.useState(false);\n  const classes = useQrCodeStyles();\n\n  return (\n    <>\n      <IconButton onClick={() => setShowQrcode(true)}>\n        <QrcodeIcon />\n      </IconButton>\n      <Dialog open={showQrcode} onClose={() => setShowQrcode(false)}>\n        <DialogContent className={classes.qrcodeContainer}>\n          <QRCode value={value} size={256} includeMargin />\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n","import { Typography } from '@material-ui/core';\nimport Link from '@material-ui/core/Link';\nimport React from 'react';\nimport { useSolanaExplorerUrlSuffix } from '../utils/connection';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogForm from './DialogForm';\nimport { abbreviateAddress } from '../utils/utils';\nimport CopyableDisplay from './CopyableDisplay';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  explorerLink: {\n    marginBottom: theme.spacing(2),\n  },\n  warning: {\n    marginBottom: theme.spacing(2),\n  },\n  container: {\n    minWidth: 600,\n  },\n}));\n\nexport default function TokenInfoDialog({\n  open,\n  onClose,\n  publicKey,\n  balanceInfo,\n}) {\n  let { mint, tokenName, tokenSymbol } = balanceInfo;\n  const urlSuffix = useSolanaExplorerUrlSuffix();\n  const classes = useStyles();\n\n  return (\n    <DialogForm open={open} onClose={onClose}>\n      <DialogTitle>\n        {tokenName ?? abbreviateAddress(mint)}\n        {tokenSymbol ? ` (${tokenSymbol})` : null}\n      </DialogTitle>\n      <DialogContent className={classes.container}>\n        <Typography className={classes.warning}>\n          Information about {tokenName ?? abbreviateAddress(mint)}\n        </Typography>\n        <Typography variant=\"body2\" className={classes.explorerLink}>\n          <Link\n            href={\n              `https://explorer.solana.com/account/${publicKey.toBase58()}` +\n              urlSuffix\n            }\n            target=\"_blank\"\n            rel=\"noopener\"\n          >\n            View on Solana Explorer\n          </Link>\n        </Typography>\n        {!!mint && (\n          <CopyableDisplay\n            value={mint.toBase58()}\n            label={'Token Mint Address'}\n            autoFocus\n            helperText={\n              <>\n                This is <strong>not</strong> your deposit address\n              </>\n            }\n          />\n        )}\n        {!!tokenName && (\n          <CopyableDisplay value={tokenName} label={'Token Name'} />\n        )}\n        {!!tokenSymbol && (\n          <CopyableDisplay value={tokenSymbol} label={'Token Symbol'} />\n        )}\n      </DialogContent>\n    </DialogForm>\n  );\n}\n","import React, { useState } from 'react';\nimport { useSnackbar } from 'notistack';\nimport { useConnection, useSolanaExplorerUrlSuffix } from './connection';\nimport Button from '@material-ui/core/Button';\nimport { confirmTransaction } from './utils';\n\nexport function useSendTransaction() {\n  const connection = useConnection();\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n  const [sending, setSending] = useState(false);\n\n  async function sendTransaction(\n    signaturePromise,\n    { onSuccess, onError } = {},\n  ) {\n    let id = enqueueSnackbar('Sending transaction...', {\n      variant: 'info',\n      persist: true,\n    });\n    setSending(true);\n    try {\n      let signature = await signaturePromise;\n      closeSnackbar(id);\n      id = enqueueSnackbar('Confirming transaction...', {\n        variant: 'info',\n        persist: true,\n        action: <ViewTransactionOnExplorerButton signature={signature} />,\n      });\n      await confirmTransaction(connection, signature);\n      closeSnackbar(id);\n      setSending(false);\n      enqueueSnackbar('Transaction confirmed', {\n        variant: 'success',\n        autoHideDuration: 15000,\n        action: <ViewTransactionOnExplorerButton signature={signature} />,\n      });\n      if (onSuccess) {\n        onSuccess(signature);\n      }\n    } catch (e) {\n      closeSnackbar(id);\n      setSending(false);\n      console.warn(e.message);\n      enqueueSnackbar(e.message, { variant: 'error' });\n      if (onError) {\n        onError(e);\n      }\n    }\n  }\n\n  return [sendTransaction, sending];\n}\n\nfunction ViewTransactionOnExplorerButton({ signature }) {\n  const urlSuffix = useSolanaExplorerUrlSuffix();\n  return (\n    <Button\n      color=\"inherit\"\n      component=\"a\"\n      target=\"_blank\"\n      rel=\"noopener\"\n      href={`https://explorer.solana.com/tx/${signature}` + urlSuffix}\n    >\n      View on Solana Explorer\n    </Button>\n  );\n}\n\nexport function useCallAsync() {\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n  return async function callAsync(\n    promise,\n    {\n      progressMessage = 'Submitting...',\n      successMessage = 'Success',\n      onSuccess,\n      onError,\n    } = {},\n  ) {\n    let id = enqueueSnackbar(progressMessage, {\n      variant: 'info',\n      persist: true,\n    });\n    try {\n      let result = await promise;\n      closeSnackbar(id);\n      if (successMessage) {\n        enqueueSnackbar(successMessage, { variant: 'success' });\n      }\n      if (onSuccess) {\n        onSuccess(result);\n      }\n    } catch (e) {\n      console.warn(e);\n      closeSnackbar(id);\n      enqueueSnackbar(e.message, { variant: 'error' });\n      if (onError) {\n        onError(e);\n      }\n    }\n  };\n}\n","import React, { useEffect, useState } from 'react';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport TextField from '@material-ui/core/TextField';\nimport { refreshWalletPublicKeys, useWallet } from '../utils/wallet';\nimport { LAMPORTS_PER_SOL, PublicKey } from '@solana/web3.js';\nimport { TOKENS, useUpdateTokenName } from '../utils/tokens/names';\nimport { useAsyncData } from '../utils/fetch-loop';\nimport LoadingIndicator from './LoadingIndicator';\nimport { makeStyles, Tab, Tabs } from '@material-ui/core';\nimport { useSendTransaction } from '../utils/notifications';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { abbreviateAddress } from '../utils/utils';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport Collapse from '@material-ui/core/Collapse';\nimport {\n  useConnectionConfig,\n  useSolanaExplorerUrlSuffix,\n} from '../utils/connection';\nimport Link from '@material-ui/core/Link';\nimport CopyableDisplay from './CopyableDisplay';\nimport DialogForm from './DialogForm';\n\nconst feeFormat = new Intl.NumberFormat(undefined, {\n  minimumFractionDigits: 6,\n  maximumFractionDigits: 6,\n});\n\nconst useStyles = makeStyles((theme) => ({\n  tabs: {\n    marginBottom: theme.spacing(1),\n    borderBottom: `1px solid ${theme.palette.background.paper}`,\n    width: '100%',\n  },\n}));\n\nexport default function AddTokenDialog({ open, onClose }) {\n  let wallet = useWallet();\n  let [tokenAccountCost] = useAsyncData(\n    wallet.tokenAccountCost,\n    wallet.tokenAccountCost,\n  );\n  let classes = useStyles();\n  let updateTokenName = useUpdateTokenName();\n\n  let [mintAddress, setMintAddress] = useState('');\n  let [tokenName, setTokenName] = useState('');\n  let [tokenSymbol, setTokenSymbol] = useState('');\n  let [sendTransaction, sending] = useSendTransaction();\n  const { endpoint } = useConnectionConfig();\n  const popularTokens = TOKENS[endpoint];\n  const [tab, setTab] = useState(!!popularTokens ? 'popular' : 'manual');\n\n  useEffect(() => {\n    if (!popularTokens) {\n      setTab('manual');\n    }\n  }, [popularTokens]);\n\n  function onSubmit({ mintAddress, tokenName, tokenSymbol }) {\n    let mint = new PublicKey(mintAddress);\n    sendTransaction(wallet.createTokenAccount(mint), {\n      onSuccess: () => {\n        updateTokenName(mint, tokenName, tokenSymbol);\n        refreshWalletPublicKeys(wallet);\n        onClose();\n      },\n    });\n  }\n\n  return (\n    <DialogForm open={open} onClose={onClose}>\n      <DialogTitle>Add Token</DialogTitle>\n      <DialogContent>\n        {tokenAccountCost ? (\n          <DialogContentText>\n            Add a token to your wallet. This will cost{' '}\n            {feeFormat.format(tokenAccountCost / LAMPORTS_PER_SOL)} SOL.\n          </DialogContentText>\n        ) : (\n          <LoadingIndicator />\n        )}\n        {!!popularTokens && (\n          <Tabs\n            value={tab}\n            variant=\"standard\"\n            textColor=\"primary\"\n            indicatorColor=\"primary\"\n            className={classes.tabs}\n            onChange={(e, value) => setTab(value)}\n          >\n            <Tab\n              label={'Popular Tokens'}\n              value=\"popular\"\n              style={{ textDecoration: 'none', width: '50%' }}\n            />\n            <Tab\n              label={'Manual Input'}\n              value=\"manual\"\n              style={{ textDecoration: 'none', width: '50%' }}\n            />\n          </Tabs>\n        )}\n        {tab === 'manual' || !popularTokens ? (\n          <React.Fragment>\n            <TextField\n              label=\"Token Mint Address\"\n              fullWidth\n              variant=\"outlined\"\n              margin=\"normal\"\n              value={mintAddress}\n              onChange={(e) => setMintAddress(e.target.value)}\n            />\n            <TextField\n              label=\"Token Name\"\n              fullWidth\n              variant=\"outlined\"\n              margin=\"normal\"\n              value={tokenName}\n              onChange={(e) => setTokenName(e.target.value)}\n            />\n            <TextField\n              label=\"Token Symbol\"\n              fullWidth\n              variant=\"outlined\"\n              margin=\"normal\"\n              value={tokenSymbol}\n              onChange={(e) => setTokenSymbol(e.target.value)}\n            />\n          </React.Fragment>\n        ) : (\n          <List disablePadding>\n            {popularTokens.map((token) => (\n              <TokenListItem\n                key={token.mintAddress}\n                {...token}\n                onSubmit={onSubmit}\n                disalbed={sending}\n              />\n            ))}\n          </List>\n        )}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Cancel</Button>\n        {tab === 'manual' && (\n          <Button\n            type=\"submit\"\n            color=\"primary\"\n            disabled={sending}\n            onClick={() => onSubmit({ tokenName, tokenSymbol, mintAddress })}\n          >\n            Add\n          </Button>\n        )}\n      </DialogActions>\n    </DialogForm>\n  );\n}\n\nfunction TokenListItem({\n  tokenName,\n  tokenSymbol,\n  mintAddress,\n  onSubmit,\n  disabled,\n}) {\n  const [open, setOpen] = useState(false);\n  const urlSuffix = useSolanaExplorerUrlSuffix();\n  const alreadyExists = false; // TODO\n  return (\n    <React.Fragment>\n      <div style={{ display: 'flex' }} key={tokenName}>\n        <ListItem button onClick={() => setOpen((open) => !open)}>\n          <ListItemText\n            primary={\n              <Link\n                target=\"_blank\"\n                rel=\"noopener\"\n                href={\n                  `https://explorer.solana.com/account/${mintAddress}` +\n                  urlSuffix\n                }\n              >\n                {tokenName ?? abbreviateAddress(mintAddress)}\n                {tokenSymbol ? ` (${tokenSymbol})` : null}\n              </Link>\n            }\n          />\n          {open ? <ExpandLess /> : <ExpandMore />}\n        </ListItem>\n        <Button\n          type=\"submit\"\n          color=\"primary\"\n          disabled={disabled || alreadyExists}\n          onClick={() => onSubmit({ tokenName, tokenSymbol, mintAddress })}\n        >\n          {alreadyExists ? 'Added' : 'Add'}\n        </Button>\n      </div>\n      <Collapse in={open} timeout=\"auto\" unmountOnExit>\n        <CopyableDisplay\n          value={mintAddress}\n          label={`${tokenSymbol} Mint Address`}\n        />\n      </Collapse>\n    </React.Fragment>\n  );\n}\n","import { useAsyncData } from '../fetch-loop';\n\nexport class SwapApiError extends Error {\n  constructor(msg, status) {\n    super(msg);\n    this.name = 'SwapApiError';\n    this.status = status;\n  }\n}\n\nexport async function swapApiRequest(\n  method,\n  path,\n  body,\n  { ignoreUserErrors = false } = {},\n) {\n  let headers = {};\n  let params = { headers, method };\n  if (method === 'GET') {\n    params.cache = 'no-cache';\n  } else if (body) {\n    headers['Content-Type'] = 'application/json';\n    params.body = JSON.stringify(body);\n  }\n  let resp = await fetch(`https://swap.sollet.io/api/${path}`, params);\n  return await handleSwapApiResponse(resp, ignoreUserErrors);\n}\n\nasync function handleSwapApiResponse(resp, ignoreUserErrors) {\n  let json = await resp.json();\n  if (!json.success) {\n    if (ignoreUserErrors && resp.status >= 400 && resp.status < 500) {\n      return null;\n    }\n    throw new SwapApiError(json.error, resp.status);\n  }\n  return json.result;\n}\n\nexport function useSwapApiGet(path, options) {\n  return useAsyncData(\n    async () => {\n      if (!path) {\n        return null;\n      }\n      return await swapApiRequest('GET', path, undefined, {\n        ignoreUserErrors: true,\n      });\n    },\n    ['swapApiGet', path],\n    options,\n  );\n}\n","export const showTokenInfoDialog = !!localStorage.getItem(\n  'showTokenInfoDialog',\n);\n\nexport const showSwapAddress = !!localStorage.getItem('showSwapAddress');\n","import React, { useEffect, useState } from 'react';\nimport Web3 from 'web3';\nimport ERC20_ABI from './erc20-abi.json';\nimport SWAP_ABI from './swap-abi.json';\nimport Button from '@material-ui/core/Button';\nimport { useCallAsync } from '../notifications';\n\nconst web3 = new Web3(window.ethereum);\n\nexport function useEthAccount() {\n  const [account, setAccount] = useState(null);\n\n  useEffect(() => {\n    if (!window.ethereum) {\n      return;\n    }\n    const onChange = (accounts) =>\n      setAccount(accounts.length > 0 ? accounts[0] : null);\n    window.ethereum.request({ method: 'eth_accounts' }).then(onChange);\n    window.ethereum.on('accountsChanged', onChange);\n    return () => window.ethereum.removeListener('accountsChanged', onChange);\n  }, []);\n\n  return account;\n}\n\nexport async function getErc20Balance(account, erc20Address) {\n  if (!erc20Address) {\n    return parseInt(await web3.eth.getBalance(account)) / 1e18;\n  }\n\n  const erc20 = new web3.eth.Contract(ERC20_ABI, erc20Address);\n  const [value, decimals] = await Promise.all([\n    erc20.methods.balanceOf(account).call(),\n    erc20.methods.decimals().call(),\n  ]);\n  return parseInt(value, 10) / 10 ** parseInt(decimals, 10);\n}\n\nexport async function swapErc20ToSpl({\n  ethAccount,\n  erc20Address,\n  swapAddress,\n  destination,\n  amount,\n  onStatusChange,\n}) {\n  if (!erc20Address) {\n    return swapEthToSpl({\n      ethAccount,\n      swapAddress,\n      destination,\n      amount,\n      onStatusChange,\n    });\n  }\n\n  const erc20 = new web3.eth.Contract(ERC20_ABI, erc20Address);\n  const swap = new web3.eth.Contract(SWAP_ABI, swapAddress);\n  const decimals = parseInt(await erc20.methods.decimals().call(), 10);\n\n  const approveTx = erc20.methods\n    .approve(swapAddress, Math.round(amount * 10 ** decimals))\n    .send({ from: ethAccount });\n  await waitForTxid(approveTx);\n\n  onStatusChange({ step: 1 });\n\n  const swapTx = swap.methods\n    .swapErc20(erc20Address, destination, Math.round(amount * 10 ** decimals))\n    .send({ from: ethAccount, gasLimit: 100000 });\n  const swapTxid = await waitForTxid(swapTx);\n\n  onStatusChange({ step: 2, txid: swapTxid, confirms: 0 });\n\n  await Promise.all([\n    approveTx,\n    swapTx,\n    waitForConfirms(swapTx, onStatusChange),\n  ]);\n\n  onStatusChange({ step: 3 });\n}\n\nexport async function swapEthToSpl({\n  ethAccount,\n  swapAddress,\n  destination,\n  amount,\n  onStatusChange,\n}) {\n  const swap = new web3.eth.Contract(SWAP_ABI, swapAddress);\n\n  const swapTx = swap.methods\n    .swapEth(destination)\n    .send({ from: ethAccount, value: Math.floor(amount * 1e18) });\n  const swapTxid = await waitForTxid(swapTx);\n\n  onStatusChange({ step: 2, txid: swapTxid, confirms: 0 });\n\n  await Promise.all([swapTx, waitForConfirms(swapTx, onStatusChange)]);\n\n  onStatusChange({ step: 3 });\n}\n\nconst pendingNonces = new Set();\n\nexport async function withdrawEth(from, withdrawal, callAsync) {\n  const { params, signature } = withdrawal.txData;\n  const swap = new web3.eth.Contract(SWAP_ABI, params[1]);\n  let method, nonce;\n  if (params[0] === 'withdrawErc20') {\n    method = swap.methods.withdrawErc20(\n      params[2],\n      params[3],\n      params[4],\n      params[5],\n      signature,\n    );\n    nonce = params[5];\n  } else if (params[0] === 'withdrawEth') {\n    method = swap.methods.withdrawEth(\n      params[2],\n      params[3],\n      params[4],\n      signature,\n    );\n    nonce = params[4];\n  } else {\n    return;\n  }\n  if (pendingNonces.has(nonce)) {\n    return;\n  }\n  try {\n    await method.estimateGas();\n  } catch (e) {\n    return;\n  }\n  pendingNonces.add(nonce);\n  await callAsync(method.send({ from }), {\n    progressMessage: `Completing ${withdrawal.coin.ticker} transfer...`,\n  });\n  pendingNonces.delete(nonce);\n}\n\nfunction waitForTxid(tx) {\n  return new Promise((resolve, reject) => {\n    tx.once('transactionHash', resolve).catch(reject);\n  });\n}\n\nfunction waitForConfirms(tx, onStatusChange) {\n  return new Promise((resolve, reject) => {\n    let resolved = false;\n    tx.on('confirmation', (confirms, receipt) => {\n      if (!resolved) {\n        onStatusChange({ confirms: confirms + 1 });\n        if (!receipt.status) {\n          reject('Transaction failed');\n          resolved = true;\n        } else if (confirms >= 11) {\n          resolve();\n          resolved = true;\n        }\n      }\n    });\n  });\n}\n\nexport function ConnectToMetamaskButton() {\n  const callAsync = useCallAsync();\n\n  if (!window.ethereum) {\n    return (\n      <Button\n        color=\"primary\"\n        variant=\"outlined\"\n        component=\"a\"\n        href=\"https://metamask.io/\"\n        target=\"_blank\"\n        rel=\"noopener\"\n      >\n        Connect to MetaMask\n      </Button>\n    );\n  }\n\n  function connect() {\n    callAsync(\n      window.ethereum.request({\n        method: 'eth_requestAccounts',\n      }),\n      {\n        progressMessage: 'Connecting to MetaMask...',\n        successMessage: 'Connected to MetaMask',\n      },\n    );\n  }\n\n  return (\n    <Button color=\"primary\" variant=\"outlined\" onClick={connect}>\n      Connect to MetaMask\n    </Button>\n  );\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport TextField from '@material-ui/core/TextField';\nimport DialogForm from './DialogForm';\nimport { useWallet } from '../utils/wallet';\nimport { PublicKey } from '@solana/web3.js';\nimport { abbreviateAddress } from '../utils/utils';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport { useCallAsync, useSendTransaction } from '../utils/notifications';\nimport { swapApiRequest, useSwapApiGet } from '../utils/swap/api';\nimport { showSwapAddress } from '../utils/config';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport {\n  ConnectToMetamaskButton,\n  useEthAccount,\n  withdrawEth,\n} from '../utils/swap/eth';\nimport { useConnection } from '../utils/connection';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport Link from '@material-ui/core/Link';\nimport Typography from '@material-ui/core/Typography';\nimport { useAsyncData } from '../utils/fetch-loop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nexport default function SendDialog({ open, onClose, publicKey, balanceInfo }) {\n  const [tab, setTab] = useState(0);\n  const onSubmitRef = useRef();\n\n  const [swapCoinInfo] = useSwapApiGet(\n    showSwapAddress && balanceInfo.mint\n      ? `coins/sol/${balanceInfo.mint.toBase58()}`\n      : null,\n  );\n  const ethAccount = useEthAccount();\n\n  const { mint, tokenName, tokenSymbol } = balanceInfo;\n\n  return (\n    <>\n      <DialogForm\n        open={open}\n        onClose={onClose}\n        onSubmit={() => onSubmitRef.current()}\n      >\n        <DialogTitle>\n          Send {tokenName ?? abbreviateAddress(mint)}\n          {tokenSymbol ? ` (${tokenSymbol})` : null}\n        </DialogTitle>\n        {swapCoinInfo ? (\n          <Tabs\n            value={tab}\n            variant=\"fullWidth\"\n            onChange={(e, value) => setTab(value)}\n            textColor=\"primary\"\n            indicatorColor=\"primary\"\n          >\n            <Tab label={`SPL ${swapCoinInfo.ticker}`} />\n            <Tab\n              label={`${swapCoinInfo.erc20Contract ? 'ERC20' : 'Native'} ${\n                swapCoinInfo.ticker\n              }`}\n            />\n          </Tabs>\n        ) : null}\n        {tab === 0 ? (\n          <SendSplDialog\n            onClose={onClose}\n            publicKey={publicKey}\n            balanceInfo={balanceInfo}\n            onSubmitRef={onSubmitRef}\n          />\n        ) : (\n          <SendSwapDialog\n            onClose={onClose}\n            publicKey={publicKey}\n            balanceInfo={balanceInfo}\n            swapCoinInfo={swapCoinInfo}\n            ethAccount={ethAccount}\n            onSubmitRef={onSubmitRef}\n          />\n        )}\n      </DialogForm>\n      {ethAccount &&\n      (swapCoinInfo?.blockchain === 'eth' || swapCoinInfo?.erc20Contract) ? (\n        <EthWithdrawalCompleter ethAccount={ethAccount} publicKey={publicKey} />\n      ) : null}\n    </>\n  );\n}\n\nfunction SendSplDialog({ onClose, publicKey, balanceInfo, onSubmitRef }) {\n  const wallet = useWallet();\n  const [sendTransaction, sending] = useSendTransaction();\n  const { fields, destinationAddress, transferAmountString } = useForm(\n    balanceInfo,\n  );\n  const { decimals } = balanceInfo;\n\n  async function makeTransaction() {\n    let amount = Math.round(parseFloat(transferAmountString) * 10 ** decimals);\n    if (!amount || amount <= 0) {\n      throw new Error('Invalid amount');\n    }\n    return wallet.transferToken(\n      publicKey,\n      new PublicKey(destinationAddress),\n      amount,\n    );\n  }\n\n  async function onSubmit() {\n    return sendTransaction(makeTransaction(), { onSuccess: onClose });\n  }\n  onSubmitRef.current = onSubmit;\n  return (\n    <>\n      <DialogContent>{fields}</DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Cancel</Button>\n        <Button type=\"submit\" color=\"primary\" disabled={sending}>\n          Send\n        </Button>\n      </DialogActions>\n    </>\n  );\n}\n\nfunction SendSwapDialog({\n  onClose,\n  publicKey,\n  balanceInfo,\n  swapCoinInfo,\n  ethAccount,\n  onSubmitRef,\n}) {\n  const wallet = useWallet();\n  const [sendTransaction, sending] = useSendTransaction();\n  const [signature, setSignature] = useState(null);\n  const {\n    fields,\n    destinationAddress,\n    transferAmountString,\n    setDestinationAddress,\n  } = useForm(balanceInfo);\n\n  const { tokenName, decimals } = balanceInfo;\n  const blockchain =\n    swapCoinInfo.blockchain === 'sol' ? 'eth' : swapCoinInfo.blockchain;\n  const needMetamask = blockchain === 'eth';\n\n  useEffect(() => {\n    if (blockchain === 'eth' && ethAccount) {\n      setDestinationAddress(ethAccount);\n    }\n  }, [blockchain, ethAccount, setDestinationAddress]);\n\n  async function makeTransaction() {\n    let amount = Math.round(parseFloat(transferAmountString) * 10 ** decimals);\n    if (!amount || amount <= 0) {\n      throw new Error('Invalid amount');\n    }\n    const swapInfo = await swapApiRequest('POST', 'swap_to', {\n      blockchain,\n      coin: swapCoinInfo.erc20Contract,\n      address: destinationAddress,\n    });\n    if (swapInfo.blockchain !== 'sol') {\n      throw new Error('Unexpected blockchain');\n    }\n    return wallet.transferToken(\n      publicKey,\n      new PublicKey(swapInfo.address),\n      amount,\n      swapInfo.memo,\n    );\n  }\n\n  async function onSubmit() {\n    return sendTransaction(makeTransaction(), { onSuccess: setSignature });\n  }\n  onSubmitRef.current = onSubmit;\n\n  if (signature) {\n    return (\n      <SendSwapProgress\n        key={signature}\n        publicKey={publicKey}\n        signature={signature}\n        onClose={onClose}\n      />\n    );\n  }\n\n  return (\n    <>\n      <DialogContent style={{ paddingTop: 16 }}>\n        <DialogContentText>\n          SPL {tokenName} can be converted to{' '}\n          {swapCoinInfo.erc20Contract ? 'ERC20' : 'native'}{' '}\n          {swapCoinInfo.ticker}\n          {needMetamask ? ' via MetaMask' : null}.\n        </DialogContentText>\n        {needMetamask && !ethAccount ? <ConnectToMetamaskButton /> : fields}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Cancel</Button>\n        <Button\n          type=\"submit\"\n          color=\"primary\"\n          disabled={sending || (needMetamask && !ethAccount)}\n        >\n          Send\n        </Button>\n      </DialogActions>\n    </>\n  );\n}\n\nfunction SendSwapProgress({ publicKey, signature, onClose }) {\n  const connection = useConnection();\n  const [swaps] = useSwapApiGet(`swaps_from/sol/${publicKey.toBase58()}`, {\n    refreshInterval: 1000,\n  });\n  const [confirms] = useAsyncData(\n    async () => {\n      const { value } = await connection.getSignatureStatus(signature);\n      return value?.confirmations;\n    },\n    [connection.getSignatureStatus, signature],\n    { refreshInterval: 2000 },\n  );\n\n  let step = 1;\n  let ethTxid = null;\n  for (let swap of swaps) {\n    const { deposit, withdrawal } = swap;\n    if (deposit.txid === signature) {\n      if (withdrawal.txid?.startsWith('0x')) {\n        step = 3;\n        ethTxid = withdrawal.txid;\n      } else {\n        step = 2;\n      }\n    }\n  }\n\n  return (\n    <>\n      <DialogContent>\n        <Stepper activeStep={step}>\n          <Step>\n            <StepLabel>Send Request</StepLabel>\n          </Step>\n          <Step>\n            <StepLabel>Wait for Confirmations</StepLabel>\n          </Step>\n          <Step>\n            <StepLabel>Withdraw Funds</StepLabel>\n          </Step>\n        </Stepper>\n        <div\n          style={{\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n          }}\n        >\n          <div style={{ marginRight: 16 }}>\n            <CircularProgress />\n          </div>\n          {confirms ? (\n            <Typography>{confirms} / 35 Confirmations</Typography>\n          ) : (\n            <Typography>Transaction Pending</Typography>\n          )}\n        </div>\n        {ethTxid ? (\n          <Typography variant=\"body2\" align=\"center\">\n            <Link\n              href={`https://etherscan.io/tx/${ethTxid}`}\n              target=\"_blank\"\n              rel=\"noopener\"\n            >\n              View on Etherscan\n            </Link>\n          </Typography>\n        ) : null}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Close</Button>\n      </DialogActions>\n    </>\n  );\n}\n\nfunction useForm(balanceInfo) {\n  const [destinationAddress, setDestinationAddress] = useState('');\n  const [transferAmountString, setTransferAmountString] = useState('');\n  const { amount: balanceAmount, decimals, tokenSymbol } = balanceInfo;\n\n  const fields = (\n    <>\n      <TextField\n        label=\"Recipient Address\"\n        fullWidth\n        variant=\"outlined\"\n        margin=\"normal\"\n        value={destinationAddress}\n        onChange={(e) => setDestinationAddress(e.target.value.trim())}\n      />\n      <TextField\n        label=\"Amount\"\n        fullWidth\n        variant=\"outlined\"\n        margin=\"normal\"\n        type=\"number\"\n        InputProps={{\n          endAdornment: tokenSymbol ? (\n            <InputAdornment position=\"end\">{tokenSymbol}</InputAdornment>\n          ) : null,\n          inputProps: {\n            step: Math.pow(10, -decimals),\n          },\n        }}\n        value={transferAmountString}\n        onChange={(e) => setTransferAmountString(e.target.value.trim())}\n        helperText={\n          <span\n            onClick={() =>\n              setTransferAmountString(\n                (balanceAmount / Math.pow(10, decimals)).toFixed(decimals),\n              )\n            }\n          >\n            Max: {balanceAmount / Math.pow(10, decimals)}\n          </span>\n        }\n      />\n    </>\n  );\n\n  return {\n    fields,\n    destinationAddress,\n    transferAmountString,\n    setDestinationAddress,\n  };\n}\n\nfunction EthWithdrawalCompleter({ ethAccount, publicKey }) {\n  const [swaps] = useSwapApiGet(`swaps_from/sol/${publicKey.toBase58()}`, {\n    refreshInterval: 10000,\n  });\n  if (!swaps) {\n    return null;\n  }\n  return swaps.map((swap) => (\n    <EthWithdrawalCompleterItem\n      key={swap.deposit.txid}\n      ethAccount={ethAccount}\n      swap={swap}\n    />\n  ));\n}\n\nfunction EthWithdrawalCompleterItem({ ethAccount, swap }) {\n  const callAsync = useCallAsync();\n  const { withdrawal } = swap;\n  useEffect(() => {\n    if (\n      withdrawal.status === 'sent' &&\n      withdrawal.blockchain === 'eth' &&\n      withdrawal.txid &&\n      !withdrawal.txid.startsWith('0x') &&\n      withdrawal.txData\n    ) {\n      withdrawEth(ethAccount, withdrawal, callAsync);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [withdrawal.txid, withdrawal.status]);\n  return null;\n}\n","import React, { useState } from 'react';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogForm from './DialogForm';\nimport { abbreviateAddress } from '../utils/utils';\nimport CopyableDisplay from './CopyableDisplay';\nimport { useSolanaExplorerUrlSuffix } from '../utils/connection';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport { useAsyncData } from '../utils/fetch-loop';\nimport tuple from 'immutable-tuple';\nimport { showSwapAddress } from '../utils/config';\nimport { useCallAsync } from '../utils/notifications';\nimport { swapApiRequest } from '../utils/swap/api';\nimport {\n  ConnectToMetamaskButton,\n  getErc20Balance,\n  swapErc20ToSpl,\n  useEthAccount,\n} from '../utils/swap/eth';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport TextField from '@material-ui/core/TextField';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Link from '@material-ui/core/Link';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport { DialogContentText } from '@material-ui/core';\n\nexport default function DepositDialog({\n  open,\n  onClose,\n  publicKey,\n  balanceInfo,\n}) {\n  const urlSuffix = useSolanaExplorerUrlSuffix();\n  const { mint, tokenName, tokenSymbol, owner } = balanceInfo;\n  const [tab, setTab] = useState(0);\n  const [swapInfo] = useAsyncData(async () => {\n    if (!showSwapAddress) {\n      return null;\n    }\n    return await swapApiRequest(\n      'POST',\n      'swap_to',\n      {\n        blockchain: 'sol',\n        coin: balanceInfo.mint?.toBase58(),\n        address: publicKey.toBase58(),\n      },\n      { ignoreUserErrors: true },\n    );\n  }, ['swapInfo', balanceInfo.mint?.toBase58(), publicKey.toBase58()]);\n\n  let tabs = null;\n  if (swapInfo) {\n    let firstTab = `SPL ${tokenSymbol ?? swapInfo.coin.ticker}`;\n    let secondTab = swapInfo.coin.ticker;\n    if (!mint) {\n      firstTab = 'SOL';\n    } else {\n      secondTab = `${\n        swapInfo.coin.erc20Contract ? 'ERC20' : 'Native'\n      } ${secondTab}`;\n    }\n    tabs = (\n      <Tabs\n        value={tab}\n        variant=\"fullWidth\"\n        onChange={(e, value) => setTab(value)}\n        textColor=\"primary\"\n        indicatorColor=\"primary\"\n      >\n        <Tab label={firstTab} />\n        <Tab label={secondTab} />\n      </Tabs>\n    );\n  }\n\n  return (\n    <DialogForm open={open} onClose={onClose}>\n      <DialogTitle>\n        Deposit {tokenName ?? mint.toBase58()}\n        {tokenSymbol ? ` (${tokenSymbol})` : null}\n      </DialogTitle>\n      {tabs}\n      <DialogContent style={{ paddingTop: 16 }}>\n        {tab === 0 ? (\n          <>\n            {publicKey.equals(owner) ? (\n              <DialogContentText>\n                This address can only be used to receive SOL. Do not send other\n                tokens to this address.\n              </DialogContentText>\n            ) : (\n              <DialogContentText>\n                This address can only be used to receive{' '}\n                {tokenSymbol ?? abbreviateAddress(mint)}. Do not send SOL to\n                this address.\n              </DialogContentText>\n            )}\n            <CopyableDisplay\n              value={publicKey.toBase58()}\n              label={'Deposit Address'}\n              autoFocus\n              qrCode\n            />\n            <DialogContentText variant=\"body2\">\n              <Link\n                href={\n                  `https://explorer.solana.com/account/${publicKey.toBase58()}` +\n                  urlSuffix\n                }\n                target=\"_blank\"\n                rel=\"noopener\"\n              >\n                View on Solana Explorer\n              </Link>\n            </DialogContentText>\n          </>\n        ) : (\n          <SolletSwapDepositAddress\n            balanceInfo={balanceInfo}\n            swapInfo={swapInfo}\n          />\n        )}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Close</Button>\n      </DialogActions>\n    </DialogForm>\n  );\n}\n\nfunction SolletSwapDepositAddress({ balanceInfo, swapInfo }) {\n  if (!swapInfo) {\n    return null;\n  }\n\n  const { blockchain, address, memo, coin } = swapInfo;\n  const { mint, tokenName } = balanceInfo;\n\n  if (blockchain === 'btc' && memo === null) {\n    return (\n      <>\n        <DialogContentText>\n          Native BTC can be converted to SPL {tokenName} by sending it to the\n          following address:\n        </DialogContentText>\n        <CopyableDisplay\n          value={address}\n          label=\"Native BTC Deposit Address\"\n          autoFocus\n          qrCode={`bitcoin:${address}`}\n        />\n      </>\n    );\n  }\n\n  if (blockchain === 'eth') {\n    return (\n      <>\n        <DialogContentText>\n          {coin.erc20Contract ? 'ERC20' : 'Native'} {coin.ticker} can be\n          converted to {mint ? 'SPL' : 'native'} {tokenName} via MetaMask.\n        </DialogContentText>\n        <MetamaskDeposit swapInfo={swapInfo} />\n      </>\n    );\n  }\n\n  return null;\n}\n\nfunction MetamaskDeposit({ swapInfo }) {\n  const ethAccount = useEthAccount();\n  const [amount, setAmount] = useState('');\n  const [submitted, setSubmitted] = useState(false);\n  const [status, setStatus] = useState(null);\n  const callAsync = useCallAsync();\n\n  const {\n    address: swapAddress,\n    memo: destination,\n    coin: { erc20Contract: erc20Address, ticker },\n  } = swapInfo;\n\n  const [maxAmount, maxAmountLoaded] = useAsyncData(async () => {\n    if (ethAccount) {\n      return Math.min(\n        await getErc20Balance(ethAccount, erc20Address),\n        swapInfo.maxSize ?? Infinity,\n      );\n    }\n    return 0;\n  }, tuple(getErc20Balance, ethAccount, erc20Address));\n\n  if (!ethAccount) {\n    return <ConnectToMetamaskButton />;\n  }\n\n  async function submit() {\n    setSubmitted(true);\n    setStatus({ step: 0 });\n    await callAsync(\n      (async () => {\n        let parsedAmount = parseFloat(amount);\n\n        if (!parsedAmount || parsedAmount > maxAmount) {\n          throw new Error('Invalid amount');\n        }\n        await swapErc20ToSpl({\n          ethAccount,\n          erc20Address,\n          swapAddress,\n          destination,\n          amount: parsedAmount,\n          onStatusChange: (e) => setStatus((status) => ({ ...status, ...e })),\n        });\n      })(),\n      { onError: () => setSubmitted(false) },\n    );\n  }\n\n  if (!submitted) {\n    return (\n      <div style={{ display: 'flex', alignItems: 'baseline' }}>\n        <TextField\n          label=\"Amount\"\n          fullWidth\n          variant=\"outlined\"\n          margin=\"normal\"\n          type=\"number\"\n          InputProps={{\n            endAdornment: (\n              <InputAdornment position=\"end\">{ticker}</InputAdornment>\n            ),\n            inputProps: {\n              step: 'any',\n            },\n          }}\n          value={amount}\n          onChange={(e) => setAmount(e.target.value.trim())}\n          helperText={\n            maxAmountLoaded ? (\n              <span onClick={() => setAmount(maxAmount.toFixed(6))}>\n                Max: {maxAmount.toFixed(6)}\n              </span>\n            ) : null\n          }\n        />\n        <Button color=\"primary\" style={{ marginLeft: 8 }} onClick={submit}>\n          Convert\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <Stepper activeStep={status.step}>\n        <Step>\n          <StepLabel>Approve Conversion</StepLabel>\n        </Step>\n        <Step>\n          <StepLabel>Send Funds</StepLabel>\n        </Step>\n        <Step>\n          <StepLabel>Wait for Confirmations</StepLabel>\n        </Step>\n      </Stepper>\n      {status.step === 2 ? (\n        <>\n          <div\n            style={{\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n            }}\n          >\n            <div style={{ marginRight: 16 }}>\n              <CircularProgress />\n            </div>\n            <div>\n              {status.confirms ? (\n                <Typography>{status.confirms} / 12 Confirmations</Typography>\n              ) : (\n                <Typography>Transaction Pending</Typography>\n              )}\n              <Typography variant=\"body2\">\n                <Link\n                  href={`https://etherscan.io/tx/${status.txid}`}\n                  target=\"_blank\"\n                  rel=\"noopener\"\n                >\n                  View on Etherscan\n                </Link>\n              </Typography>\n            </div>\n          </div>\n        </>\n      ) : null}\n    </>\n  );\n}\n","import React, { useState } from 'react';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Paper from '@material-ui/core/Paper';\nimport {\n  refreshWalletPublicKeys,\n  useBalanceInfo,\n  useWallet,\n  useWalletPublicKeys,\n} from '../utils/wallet';\nimport LoadingIndicator from './LoadingIndicator';\nimport Collapse from '@material-ui/core/Collapse';\nimport { Typography } from '@material-ui/core';\nimport TokenInfoDialog from './TokenInfoDialog';\nimport Link from '@material-ui/core/Link';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { abbreviateAddress } from '../utils/utils';\nimport Button from '@material-ui/core/Button';\nimport SendIcon from '@material-ui/icons/Send';\nimport ReceiveIcon from '@material-ui/icons/WorkOutline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport AddIcon from '@material-ui/icons/Add';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport IconButton from '@material-ui/core/IconButton';\nimport InfoIcon from '@material-ui/icons/InfoOutlined';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport AddTokenDialog from './AddTokenDialog';\nimport SendDialog from './SendDialog';\nimport DepositDialog from './DepositDialog';\nimport {\n  refreshAccountInfo,\n  useSolanaExplorerUrlSuffix,\n} from '../utils/connection';\nimport { showTokenInfoDialog } from '../utils/config';\n\nconst balanceFormat = new Intl.NumberFormat(undefined, {\n  minimumFractionDigits: 4,\n  maximumFractionDigits: 4,\n  useGrouping: true,\n});\n\nexport default function BalancesList() {\n  const wallet = useWallet();\n  const [publicKeys, loaded] = useWalletPublicKeys();\n  const [showAddTokenDialog, setShowAddTokenDialog] = useState(false);\n\n  return (\n    <Paper>\n      <AppBar position=\"static\" color=\"default\" elevation={1}>\n        <Toolbar>\n          <Typography variant=\"h6\" style={{ flexGrow: 1 }} component=\"h2\">\n            Balances\n          </Typography>\n          <Tooltip title=\"Add Token\" arrow>\n            <IconButton onClick={() => setShowAddTokenDialog(true)}>\n              <AddIcon />\n            </IconButton>\n          </Tooltip>\n          <Tooltip title=\"Refresh\" arrow>\n            <IconButton\n              onClick={() => {\n                refreshWalletPublicKeys(wallet);\n                publicKeys.map((publicKey) =>\n                  refreshAccountInfo(wallet.connection, publicKey, true),\n                );\n              }}\n              style={{ marginRight: -12 }}\n            >\n              <RefreshIcon />\n            </IconButton>\n          </Tooltip>\n        </Toolbar>\n      </AppBar>\n      <List disablePadding>\n        {publicKeys.map((publicKey) => (\n          <BalanceListItem key={publicKey.toBase58()} publicKey={publicKey} />\n        ))}\n        {loaded ? null : <LoadingIndicator />}\n      </List>\n      <AddTokenDialog\n        open={showAddTokenDialog}\n        onClose={() => setShowAddTokenDialog(false)}\n      />\n    </Paper>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  address: {\n    textOverflow: 'ellipsis',\n    overflowX: 'hidden',\n  },\n  itemDetails: {\n    marginLeft: theme.spacing(3),\n    marginRight: theme.spacing(3),\n    marginBottom: theme.spacing(2),\n  },\n  buttonContainer: {\n    display: 'flex',\n    justifyContent: 'space-evenly',\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1),\n  },\n}));\n\nfunction BalanceListItem({ publicKey }) {\n  const balanceInfo = useBalanceInfo(publicKey);\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n\n  if (!balanceInfo) {\n    return <LoadingIndicator delay={0} />;\n  }\n\n  let { amount, decimals, mint, tokenName, tokenSymbol } = balanceInfo;\n\n  return (\n    <>\n      <ListItem button onClick={() => setOpen((open) => !open)}>\n        <ListItemText\n          primary={\n            <>\n              {balanceFormat.format(amount / Math.pow(10, decimals))}{' '}\n              {tokenName ?? abbreviateAddress(mint)}\n              {tokenSymbol ? ` (${tokenSymbol})` : null}\n            </>\n          }\n          secondary={publicKey.toBase58()}\n          secondaryTypographyProps={{ className: classes.address }}\n        />\n        {open ? <ExpandLess /> : <ExpandMore />}\n      </ListItem>\n      <Collapse in={open} timeout=\"auto\" unmountOnExit>\n        <BalanceListItemDetails\n          publicKey={publicKey}\n          balanceInfo={balanceInfo}\n        />\n      </Collapse>\n    </>\n  );\n}\n\nfunction BalanceListItemDetails({ publicKey, balanceInfo }) {\n  const urlSuffix = useSolanaExplorerUrlSuffix();\n  const classes = useStyles();\n  const [sendDialogOpen, setSendDialogOpen] = useState(false);\n  const [depositDialogOpen, setDepositDialogOpen] = useState(false);\n  const [tokenInfoDialogOpen, setTokenInfoDialogOpen] = useState(false);\n\n  if (!balanceInfo) {\n    return <LoadingIndicator delay={0} />;\n  }\n\n  let { mint, tokenName, tokenSymbol, owner } = balanceInfo;\n\n  return (\n    <>\n      <div className={classes.itemDetails}>\n        <div className={classes.buttonContainer}>\n          {!publicKey.equals(owner) && showTokenInfoDialog ? (\n            <Button\n              variant=\"outlined\"\n              color=\"default\"\n              startIcon={<InfoIcon />}\n              onClick={() => setTokenInfoDialogOpen(true)}\n            >\n              Token Info\n            </Button>\n          ) : null}\n          <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            startIcon={<ReceiveIcon />}\n            onClick={() => setDepositDialogOpen(true)}\n          >\n            Receive\n          </Button>\n          <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            startIcon={<SendIcon />}\n            onClick={() => setSendDialogOpen(true)}\n          >\n            Send\n          </Button>\n        </div>\n        <Typography variant=\"body2\" className={classes.address}>\n          Deposit Address: {publicKey.toBase58()}\n        </Typography>\n        <Typography variant=\"body2\">\n          Token Name: {tokenName ?? 'Unknown'}\n        </Typography>\n        <Typography variant=\"body2\">\n          Token Symbol: {tokenSymbol ?? 'Unknown'}\n        </Typography>\n        {mint ? (\n          <Typography variant=\"body2\" className={classes.address}>\n            Token Address: {mint.toBase58()}\n          </Typography>\n        ) : null}\n        <Typography variant=\"body2\">\n          <Link\n            href={\n              `https://explorer.solana.com/account/${publicKey.toBase58()}` +\n              urlSuffix\n            }\n            target=\"_blank\"\n            rel=\"noopener\"\n          >\n            View on Solana Explorer\n          </Link>\n        </Typography>\n      </div>\n      <SendDialog\n        open={sendDialogOpen}\n        onClose={() => setSendDialogOpen(false)}\n        balanceInfo={balanceInfo}\n        publicKey={publicKey}\n      />\n      <DepositDialog\n        open={depositDialogOpen}\n        onClose={() => setDepositDialogOpen(false)}\n        balanceInfo={balanceInfo}\n        publicKey={publicKey}\n      />\n      <TokenInfoDialog\n        open={tokenInfoDialogOpen}\n        onClose={() => setTokenInfoDialogOpen(false)}\n        balanceInfo={balanceInfo}\n        publicKey={publicKey}\n      />\n    </>\n  );\n}\n","import {\n  refreshWalletPublicKeys,\n  useBalanceInfo,\n  useWallet,\n} from '../utils/wallet';\nimport { useUpdateTokenName } from '../utils/tokens/names';\nimport { useCallAsync, useSendTransaction } from '../utils/notifications';\nimport { Account, LAMPORTS_PER_SOL } from '@solana/web3.js';\nimport { abbreviateAddress, sleep } from '../utils/utils';\nimport {\n  refreshAccountInfo,\n  useConnectionConfig,\n  MAINNET_URL,\n} from '../utils/connection';\nimport { createAndInitializeMint } from '../utils/tokens';\nimport { Tooltip, Button } from '@material-ui/core';\nimport React from 'react';\n\nexport default function DebugButtons() {\n  const wallet = useWallet();\n  const updateTokenName = useUpdateTokenName();\n  const { endpoint } = useConnectionConfig();\n  const balanceInfo = useBalanceInfo(wallet.account.publicKey);\n  const [sendTransaction, sending] = useSendTransaction();\n  const callAsync = useCallAsync();\n\n  let { amount } = balanceInfo || {};\n\n  function requestAirdrop() {\n    callAsync(\n      wallet.connection.requestAirdrop(\n        wallet.account.publicKey,\n        LAMPORTS_PER_SOL,\n      ),\n      {\n        onSuccess: async () => {\n          await sleep(5000);\n          refreshAccountInfo(wallet.connection, wallet.account.publicKey);\n        },\n        successMessage:\n          'Success! Please wait up to 30 seconds for the SOL tokens to appear in your wallet.',\n      },\n    );\n  }\n\n  function mintTestToken() {\n    let mint = new Account();\n    updateTokenName(\n      mint.publicKey,\n      `Test Token ${abbreviateAddress(mint.publicKey)}`,\n      `TEST${mint.publicKey.toBase58().slice(0, 2)}`,\n    );\n    sendTransaction(\n      createAndInitializeMint({\n        connection: wallet.connection,\n        owner: wallet.account,\n        mint,\n        amount: 1000,\n        decimals: 2,\n        initialAccount: new Account(),\n      }),\n      { onSuccess: () => refreshWalletPublicKeys(wallet) },\n    );\n  }\n\n  const noSol = amount === 0;\n  const requestAirdropDisabled = endpoint === MAINNET_URL;\n  return (\n    <div style={{ display: 'flex' }}>\n      <Tooltip\n        title={\n          requestAirdropDisabled\n            ? 'Receive some devnet SOL for free. Only enabled on the devnet'\n            : 'Receive some devnet SOL for free'\n        }\n      >\n        <span>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={requestAirdrop}\n            disabled={requestAirdropDisabled}\n          >\n            Request Airdrop\n          </Button>\n        </span>\n      </Tooltip>\n      <Tooltip\n        title={\n          noSol\n            ? 'Generate and receive balances in a new test token. Requires SOL balance'\n            : 'Generate and receive balances in a new test token'\n        }\n      >\n        <span>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={mintTestToken}\n            disabled={sending || noSol}\n            style={{ marginLeft: 24 }}\n          >\n            Mint Test Token\n          </Button>\n        </span>\n      </Tooltip>\n    </div>\n  );\n}\n","import React from 'react';\nimport Container from '@material-ui/core/Container';\nimport BalancesList from '../components/BalancesList';\nimport Grid from '@material-ui/core/Grid';\nimport { useIsProdNetwork } from '../utils/connection';\nimport DebugButtons from '../components/DebugButtons';\n\nexport default function WalletPage() {\n  const isProdNetwork = useIsProdNetwork();\n  return (\n    <Container fixed maxWidth=\"md\">\n      <Grid container spacing={3}>\n        <Grid item xs={12}>\n          <BalancesList />\n        </Grid>\n        {isProdNetwork ? null : (\n          <Grid item xs={12}>\n            <DebugButtons />\n          </Grid>\n        )}\n      </Grid>\n    </Container>\n  );\n}\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useWallet } from '../utils/wallet';\nimport { Typography } from '@material-ui/core';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Button from '@material-ui/core/Button';\nimport ImportExportIcon from '@material-ui/icons/ImportExport';\nimport { makeStyles } from '@material-ui/core/styles';\nimport assert from 'assert';\nimport bs58 from 'bs58';\nimport nacl from 'tweetnacl';\n\nexport default function PopupPage({ opener }) {\n  const wallet = useWallet();\n\n  const origin = useMemo(() => {\n    let params = new URLSearchParams(window.location.hash.slice(1));\n    return params.get('origin');\n  }, []);\n  const postMessage = useCallback(\n    (message) => {\n      opener.postMessage({ jsonrpc: '2.0', ...message }, origin);\n    },\n    [opener, origin],\n  );\n\n  const [connectedAccount, setConnectedAccount] = useState(null);\n  const hasConnectedAccount = !!connectedAccount;\n  const [requests, setRequests] = useState([]);\n\n  // Send a disconnect event if this window is closed, this component is\n  // unmounted, or setConnectedAccount(null) is called.\n  useEffect(() => {\n    if (hasConnectedAccount) {\n      function unloadHandler() {\n        postMessage({ method: 'disconnected' });\n      }\n      window.addEventListener('beforeunload', unloadHandler);\n      return () => {\n        unloadHandler();\n        window.removeEventListener('beforeunload', unloadHandler);\n      };\n    }\n  }, [hasConnectedAccount, postMessage]);\n\n  // Disconnect if the user switches to a different wallet.\n  useEffect(() => {\n    if (\n      connectedAccount &&\n      !connectedAccount.publicKey.equals(wallet.publicKey)\n    ) {\n      setConnectedAccount(null);\n    }\n  }, [connectedAccount, wallet]);\n\n  // Push requests from the parent window into a queue.\n  useEffect(() => {\n    function messageHandler(e) {\n      if (e.origin === origin && e.source === window.opener) {\n        if (e.data.method !== 'signTransaction') {\n          postMessage({ error: 'Unsupported method', id: e.data.id });\n        }\n        setRequests((requests) => [...requests, e.data]);\n      }\n    }\n    window.addEventListener('message', messageHandler);\n    return () => window.removeEventListener('message', messageHandler);\n  }, [origin, postMessage]);\n\n  if (\n    !connectedAccount ||\n    !connectedAccount.publicKey.equals(wallet.publicKey)\n  ) {\n    // Approve the parent page to connect to this wallet.\n    function connect() {\n      setConnectedAccount(wallet.account);\n      postMessage({\n        method: 'connected',\n        params: { publicKey: wallet.publicKey.toBase58() },\n      });\n      focusParent();\n    }\n\n    return <ApproveConnectionForm origin={origin} onApprove={connect} />;\n  }\n\n  if (requests.length > 0) {\n    const request = requests[0];\n    assert(request.method === 'signTransaction');\n    const message = bs58.decode(request.params.message);\n\n    function sendSignature() {\n      setRequests((requests) => requests.slice(1));\n      postMessage({\n        result: {\n          signature: bs58.encode(\n            nacl.sign.detached(message, wallet.account.secretKey),\n          ),\n          publicKey: wallet.publicKey.toBase58(),\n        },\n        id: request.id,\n      });\n      if (requests.length === 1) {\n        focusParent();\n      }\n    }\n\n    function sendReject() {\n      setRequests((requests) => requests.slice(1));\n      postMessage({\n        error: 'Transaction cancelled',\n        id: request.id,\n      });\n      if (requests.length === 1) {\n        focusParent();\n      }\n    }\n\n    return (\n      <ApproveSignatureForm\n        origin={origin}\n        message={message}\n        onApprove={sendSignature}\n        onReject={sendReject}\n      />\n    );\n  }\n\n  return (\n    <Typography>Please keep this window open in the background.</Typography>\n  );\n}\n\n/**\n * Switch focus to the parent window. This requires that the parent runs\n * `window.name = 'parent'` before opening the popup.\n */\nfunction focusParent() {\n  window.open('', 'parent');\n}\n\nconst useStyles = makeStyles((theme) => ({\n  connection: {\n    marginTop: theme.spacing(3),\n    marginBottom: theme.spacing(3),\n    textAlign: 'center',\n  },\n  transaction: {\n    wordBreak: 'break-all',\n  },\n  actions: {\n    justifyContent: 'space-between',\n  },\n}));\n\nfunction ApproveConnectionForm({ origin, onApprove }) {\n  const wallet = useWallet();\n  const classes = useStyles();\n  return (\n    <Card>\n      <CardContent>\n        <Typography variant=\"h6\" component=\"h1\" gutterBottom>\n          Allow this site to access your Solana account?\n        </Typography>\n        <div className={classes.connection}>\n          <Typography>{origin}</Typography>\n          <ImportExportIcon fontSize=\"large\" />\n          <Typography>{wallet.publicKey.toBase58()}</Typography>\n        </div>\n        <Typography>Only connect with sites you trust.</Typography>\n      </CardContent>\n      <CardActions className={classes.actions}>\n        <Button onClick={window.close}>Cancel</Button>\n        <Button color=\"primary\" onClick={onApprove}>\n          Connect\n        </Button>\n      </CardActions>\n    </Card>\n  );\n}\n\nfunction ApproveSignatureForm({ origin, message, onApprove, onReject }) {\n  const classes = useStyles();\n\n  // TODO: decode message\n\n  return (\n    <Card>\n      <CardContent>\n        <Typography variant=\"h6\" component=\"h1\" gutterBottom>\n          {origin} would like to send the following transaction:\n        </Typography>\n        <Typography className={classes.transaction}>\n          {bs58.encode(message)}\n        </Typography>\n      </CardContent>\n      <CardActions className={classes.actions}>\n        <Button onClick={onReject}>Cancel</Button>\n        <Button color=\"primary\" onClick={onApprove}>\n          Approve\n        </Button>\n      </CardActions>\n    </Card>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport {\n  generateMnemonicAndSeed,\n  hasLockedMnemonicAndSeed,\n  loadMnemonicAndSeed,\n  mnemonicToSeed,\n  storeMnemonicAndSeed,\n} from '../utils/wallet-seed';\nimport Container from '@material-ui/core/Container';\nimport LoadingIndicator from '../components/LoadingIndicator';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport { Typography } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport CardActions from '@material-ui/core/CardActions';\nimport Button from '@material-ui/core/Button';\nimport { useCallAsync } from '../utils/notifications';\nimport Link from '@material-ui/core/Link';\n\nexport default function LoginPage() {\n  const [restore, setRestore] = useState(false);\n  return (\n    <Container maxWidth=\"sm\">\n      {restore ? (\n        <RestoreWalletForm goBack={() => setRestore(false)} />\n      ) : (\n        <>\n          {hasLockedMnemonicAndSeed() ? <LoginForm /> : <CreateWalletForm />}\n          <br />\n          <Link style={{ cursor: 'pointer' }} onClick={() => setRestore(true)}>\n            Restore existing wallet\n          </Link>\n        </>\n      )}\n    </Container>\n  );\n}\n\nfunction CreateWalletForm() {\n  const [mnemonicAndSeed, setMnemonicAndSeed] = useState(null);\n  useEffect(() => {\n    generateMnemonicAndSeed().then(setMnemonicAndSeed);\n  }, []);\n  const [savedWords, setSavedWords] = useState(false);\n  const callAsync = useCallAsync();\n\n  function submit(password) {\n    const { mnemonic, seed } = mnemonicAndSeed;\n    callAsync(storeMnemonicAndSeed(mnemonic, seed, password), {\n      progressMessage: 'Creating wallet...',\n      successMessage: 'Wallet created',\n    });\n  }\n\n  if (!savedWords) {\n    return (\n      <SeedWordsForm\n        mnemonicAndSeed={mnemonicAndSeed}\n        goForward={() => setSavedWords(true)}\n      />\n    );\n  }\n\n  return (\n    <ChoosePasswordForm\n      mnemonicAndSeed={mnemonicAndSeed}\n      goBack={() => setSavedWords(false)}\n      onSubmit={submit}\n    />\n  );\n}\n\nfunction SeedWordsForm({ mnemonicAndSeed, goForward }) {\n  const [confirmed, setConfirmed] = useState(false);\n\n  return (\n    <Card>\n      <CardContent>\n        <Typography variant=\"h5\" gutterBottom>\n          Create New Wallet\n        </Typography>\n        <Typography paragraph>\n          Create a new wallet to hold Solana and SPL tokens.\n        </Typography>\n        <Typography>\n          Please write down the following twelve words and keep them in a safe\n          place:\n        </Typography>\n        {mnemonicAndSeed ? (\n          <TextField\n            variant=\"outlined\"\n            fullWidth\n            multiline\n            margin=\"normal\"\n            value={mnemonicAndSeed.mnemonic}\n            label=\"Seed Words\"\n            onFocus={(e) => e.currentTarget.select()}\n          />\n        ) : (\n          <LoadingIndicator />\n        )}\n        <Typography paragraph>\n          Your private keys are only stored on your current computer or device.\n          You will need these words to restore your wallet if your browser's\n          storage is cleared or your device is damaged or lost.\n        </Typography>\n        <FormControlLabel\n          control={\n            <Checkbox\n              checked={confirmed}\n              disabled={!mnemonicAndSeed}\n              onChange={(e) => setConfirmed(e.target.checked)}\n            />\n          }\n          label=\"I have saved these words in a safe place.\"\n        />\n      </CardContent>\n      <CardActions style={{ justifyContent: 'flex-end' }}>\n        <Button color=\"primary\" disabled={!confirmed} onClick={goForward}>\n          Continue\n        </Button>\n      </CardActions>\n    </Card>\n  );\n}\n\nfunction ChoosePasswordForm({ goBack, onSubmit }) {\n  const [password, setPassword] = useState('');\n  const [passwordConfirm, setPasswordConfirm] = useState('');\n\n  return (\n    <Card>\n      <CardContent>\n        <Typography variant=\"h5\" gutterBottom>\n          Choose a Password (Optional)\n        </Typography>\n        <Typography>\n          Optionally pick a password to protect your wallet.\n        </Typography>\n        <TextField\n          variant=\"outlined\"\n          fullWidth\n          margin=\"normal\"\n          label=\"New Password\"\n          type=\"password\"\n          autoComplete=\"new-password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <TextField\n          variant=\"outlined\"\n          fullWidth\n          margin=\"normal\"\n          label=\"Confirm Password\"\n          type=\"password\"\n          autoComplete=\"new-password\"\n          value={passwordConfirm}\n          onChange={(e) => setPasswordConfirm(e.target.value)}\n        />\n        <Typography>\n          If you forget your password you will need to restore your wallet using\n          your seed words.\n        </Typography>\n      </CardContent>\n      <CardActions style={{ justifyContent: 'space-between' }}>\n        <Button onClick={goBack}>Back</Button>\n        <Button\n          color=\"primary\"\n          disabled={password !== passwordConfirm}\n          onClick={() => onSubmit(password)}\n        >\n          Create Wallet\n        </Button>\n      </CardActions>\n    </Card>\n  );\n}\n\nfunction LoginForm() {\n  const [password, setPassword] = useState('');\n  const [stayLoggedIn, setStayLoggedIn] = useState(false);\n  const callAsync = useCallAsync();\n\n  function submit() {\n    callAsync(loadMnemonicAndSeed(password, stayLoggedIn), {\n      progressMessage: 'Unlocking wallet...',\n      successMessage: 'Wallet unlocked',\n    });\n  }\n\n  return (\n    <Card>\n      <CardContent>\n        <Typography variant=\"h5\" gutterBottom>\n          Unlock Wallet\n        </Typography>\n        <TextField\n          variant=\"outlined\"\n          fullWidth\n          margin=\"normal\"\n          label=\"Password\"\n          type=\"password\"\n          autoComplete=\"current-password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <FormControlLabel\n          control={\n            <Checkbox\n              checked={stayLoggedIn}\n              onChange={(e) => setStayLoggedIn(e.target.checked)}\n            />\n          }\n          label=\"Keep wallet unlocked\"\n        />\n      </CardContent>\n      <CardActions style={{ justifyContent: 'flex-end' }}>\n        <Button color=\"primary\" onClick={submit}>\n          Unlock\n        </Button>\n      </CardActions>\n    </Card>\n  );\n}\n\nfunction RestoreWalletForm({ goBack }) {\n  const [mnemonic, setMnemonic] = useState('');\n  const [password, setPassword] = useState('');\n  const [passwordConfirm, setPasswordConfirm] = useState('');\n  const callAsync = useCallAsync();\n\n  function submit() {\n    callAsync(\n      mnemonicToSeed(mnemonic).then((seed) =>\n        storeMnemonicAndSeed(mnemonic, seed, password),\n      ),\n    );\n  }\n\n  return (\n    <Card>\n      <CardContent>\n        <Typography variant=\"h5\" gutterBottom>\n          Restore Existing Wallet\n        </Typography>\n        <Typography>\n          Restore your wallet using your twelve seed words. Note that this will\n          delete any existing wallet on this device.\n        </Typography>\n        <TextField\n          variant=\"outlined\"\n          fullWidth\n          multiline\n          rows={3}\n          margin=\"normal\"\n          label=\"Seed Words\"\n          value={mnemonic}\n          onChange={(e) => setMnemonic(e.target.value)}\n        />\n        <TextField\n          variant=\"outlined\"\n          fullWidth\n          margin=\"normal\"\n          label=\"New Password (Optional)\"\n          type=\"password\"\n          autoComplete=\"new-password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <TextField\n          variant=\"outlined\"\n          fullWidth\n          margin=\"normal\"\n          label=\"Confirm Password\"\n          type=\"password\"\n          autoComplete=\"new-password\"\n          value={passwordConfirm}\n          onChange={(e) => setPasswordConfirm(e.target.value)}\n        />\n      </CardContent>\n      <CardActions style={{ justifyContent: 'space-between' }}>\n        <Button onClick={goBack}>Cancel</Button>\n        <Button\n          color=\"primary\"\n          disabled={password !== passwordConfirm}\n          onClick={submit}\n        >\n          Restore\n        </Button>\n      </CardActions>\n    </Card>\n  );\n}\n","import React, { Suspense } from 'react';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport {\n  ThemeProvider,\n  unstable_createMuiStrictModeTheme as createMuiTheme,\n} from '@material-ui/core/styles';\nimport blue from '@material-ui/core/colors/blue';\nimport NavigationFrame from './components/NavigationFrame';\nimport { ConnectionProvider } from './utils/connection';\nimport WalletPage from './pages/WalletPage';\nimport { useWallet, WalletProvider } from './utils/wallet';\nimport LoadingIndicator from './components/LoadingIndicator';\nimport { SnackbarProvider } from 'notistack';\nimport PopupPage from './pages/PopupPage';\nimport LoginPage from './pages/LoginPage';\n\nexport default function App() {\n  // TODO: add toggle for dark mode\n  const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)');\n  const theme = React.useMemo(\n    () =>\n      createMuiTheme({\n        palette: {\n          type: prefersDarkMode ? 'dark' : 'light',\n          primary: blue,\n        },\n      }),\n    [prefersDarkMode],\n  );\n\n  // Disallow rendering inside an iframe to prevent clickjacking.\n  if (window.self !== window.top) {\n    return null;\n  }\n\n  return (\n    <Suspense fallback={<LoadingIndicator />}>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <ConnectionProvider>\n          <WalletProvider>\n            <SnackbarProvider maxSnack={5} autoHideDuration={8000}>\n              <NavigationFrame>\n                <Suspense fallback={<LoadingIndicator />}>\n                  <PageContents />\n                </Suspense>\n              </NavigationFrame>\n            </SnackbarProvider>\n          </WalletProvider>\n        </ConnectionProvider>\n      </ThemeProvider>\n    </Suspense>\n  );\n}\n\nfunction PageContents() {\n  const wallet = useWallet();\n  if (!wallet) {\n    return <LoginPage />;\n  }\n  if (window.opener) {\n    return <PopupPage opener={window.opener} />;\n  }\n  return <WalletPage />;\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import { pbkdf2 } from 'crypto';\nimport { randomBytes, secretbox } from 'tweetnacl';\nimport bs58 from 'bs58';\nimport { EventEmitter } from 'events';\n\nexport async function generateMnemonicAndSeed() {\n  const bip39 = await import('bip39');\n  const mnemonic = bip39.generateMnemonic(128);\n  const seed = await bip39.mnemonicToSeed(mnemonic);\n  return { mnemonic, seed: Buffer.from(seed).toString('hex') };\n}\n\nexport async function mnemonicToSeed(mnemonic) {\n  const bip39 = await import('bip39');\n  if (!bip39.validateMnemonic(mnemonic)) {\n    throw new Error('Invalid seed words');\n  }\n  const seed = await bip39.mnemonicToSeed(mnemonic);\n  return Buffer.from(seed).toString('hex');\n}\n\nlet unlockedMnemonicAndSeed = JSON.parse(\n  sessionStorage.getItem('unlocked') ||\n    localStorage.getItem('unlocked') ||\n    'null',\n) || { mnemonic: null, seed: null };\nexport const walletSeedChanged = new EventEmitter();\n\nexport function getUnlockedMnemonicAndSeed() {\n  return unlockedMnemonicAndSeed;\n}\n\nexport function hasLockedMnemonicAndSeed() {\n  return !!localStorage.getItem('locked');\n}\n\nfunction setUnlockedMnemonicAndSeed(mnemonic, seed) {\n  unlockedMnemonicAndSeed = { mnemonic, seed };\n  walletSeedChanged.emit('change', unlockedMnemonicAndSeed);\n}\n\nexport async function storeMnemonicAndSeed(mnemonic, seed, password) {\n  const plaintext = JSON.stringify({ mnemonic, seed });\n  if (password) {\n    const salt = randomBytes(16);\n    const kdf = 'pbkdf2';\n    const iterations = 100000;\n    const digest = 'sha256';\n    const key = await deriveEncryptionKey(password, salt, iterations, digest);\n    const nonce = randomBytes(secretbox.nonceLength);\n    const encrypted = secretbox(Buffer.from(plaintext), nonce, key);\n    localStorage.setItem(\n      'locked',\n      JSON.stringify({\n        encrypted: bs58.encode(encrypted),\n        nonce: bs58.encode(nonce),\n        kdf,\n        salt: bs58.encode(salt),\n        iterations,\n        digest,\n      }),\n    );\n    localStorage.removeItem('unlocked');\n    sessionStorage.removeItem('unlocked');\n  } else {\n    localStorage.setItem('unlocked', plaintext);\n    localStorage.removeItem('locked');\n    sessionStorage.removeItem('unlocked');\n  }\n  setUnlockedMnemonicAndSeed(mnemonic, seed);\n}\n\nexport async function loadMnemonicAndSeed(password, stayLoggedIn) {\n  const {\n    encrypted: encodedEncrypted,\n    nonce: encodedNonce,\n    salt: encodedSalt,\n    iterations,\n    digest,\n  } = JSON.parse(localStorage.getItem('locked'));\n  const encrypted = bs58.decode(encodedEncrypted);\n  const nonce = bs58.decode(encodedNonce);\n  const salt = bs58.decode(encodedSalt);\n  const key = await deriveEncryptionKey(password, salt, iterations, digest);\n  const plaintext = secretbox.open(encrypted, nonce, key);\n  if (!plaintext) {\n    throw new Error('Incorrect password');\n  }\n  const decodedPlaintext = Buffer.from(plaintext).toString();\n  const { mnemonic, seed } = JSON.parse(decodedPlaintext);\n  if (stayLoggedIn) {\n    sessionStorage.setItem('unlocked', decodedPlaintext);\n  }\n  setUnlockedMnemonicAndSeed(mnemonic, seed);\n  return { mnemonic, seed };\n}\n\nasync function deriveEncryptionKey(password, salt, iterations, digest) {\n  return new Promise((resolve, reject) =>\n    pbkdf2(\n      password,\n      salt,\n      iterations,\n      secretbox.keyLength,\n      digest,\n      (err, key) => (err ? reject(err) : resolve(key)),\n    ),\n  );\n}\n\nexport function lockWallet() {\n  setUnlockedMnemonicAndSeed(null, null);\n}\n"],"sourceRoot":""}